---
title: "1.5 IP-adresser och subnetting"
parent: "NÃ¤tverk"
nav_order: 105
---

# 1.5 IP-adresser och subnetting

### 1.5.1 Vad Ã¤r en IP-adress och varfÃ¶r anvÃ¤nder vi dem?
En IP-adress identifierar ett nÃ¤tverksinterface sÃ¥ att paket kan levereras rÃ¤tt, ungefÃ¤r som gata + postnummer fÃ¶r post. Det finns tvÃ¥ versioner i bruk: IPv4 och IPv6. IPv4 har 2Â³Â² = 4 294 967 296 mÃ¶jliga adresser; i praktiken fÃ¤rre fÃ¶r vanliga vÃ¤rdar eftersom mÃ¥nga intervall Ã¤r reserverade (t.ex. privatnÃ¤t, loopback, multicast). Med fler enheter per person, servrar och sensorer tog IPv4-utrymmet i praktiken slut, vilket ledde till tekniker som CIDR (effektivare uppdelning), NAT (mÃ¥nga interna delar pÃ¥ en publik adress) och hÃ¥rdare Ã¥teranvÃ¤ndning. IPv6 lÃ¶ser bristen med 2Â¹Â²â¸ â‰ˆ 3,4Ã—10Â³â¸ adresser och en hierarkisk modell som skalar â€“ vanligtvis /64 per VLAN i lokala nÃ¤t.
Vi skiljer ocksÃ¥ pÃ¥ publika och privata adresser (vilka fÃ¥r â€œsynasâ€ pÃ¥ internet). Publika adresser Ã¤r globalt routbara och tilldelas via internetleverantÃ¶rer. Privata IPv4-intervall (10/8, 172.16/12, 192.168/16) anvÃ¤nds inom organisationer och Ã¶versÃ¤tts via NAT nÃ¤r de ska ut pÃ¥ internet. I IPv6 motsvaras detta av Global Unicast (publikt, 2000::/3) och ULA (privat, fc00::/7) som inte ska routas pÃ¥ internet; i IPv6 ersÃ¤tts NAT normalt av tydliga brandvÃ¤ggspolicys. PÃ¥ lagnivÃ¥ finns dessutom link-local-adresser fÃ¶r lokal kommunikation: 169.254.0.0/16 i IPv4 (APIPA) och fe80::/10 i IPv6.
Exempel: En privat IP-adress Ã¤r som ett smeknamn â€“ bara de nÃ¤rmaste â€œi husetâ€ (ditt lokala nÃ¤t) anvÃ¤nder det. Mamma sÃ¤ger kanske â€œlilla snuttegubbenâ€ hemma, men det sÃ¤ger man inte utanfÃ¶r vÃ¤ggarna. En publik adress Ã¤r dÃ¤remot som ditt officiella namn/adress som fungerar var du Ã¤n Ã¤r och som alla postkontor (routrar pÃ¥ internet) fÃ¶rstÃ¥r.
FÃ¶r att lyckas i resten av boken behÃ¶ver du tre saker:
- Se att en adress tillhÃ¶r ett interface, inte â€œhela datornâ€.
- Kunna lÃ¤sa prefixlÃ¤ngden (t.ex. /24) och dÃ¤rmed skilja Net ID och Host ID.
- FÃ¶rstÃ¥ publik vs privat och nÃ¤r NAT respektive brandvÃ¤ggspolicy anvÃ¤nds.
Se att en adress tillhÃ¶r ett interface, inte â€œhela datornâ€.
Kunna lÃ¤sa prefixlÃ¤ngden (t.ex. /24) och dÃ¤rmed skilja Net ID och Host ID.
FÃ¶rstÃ¥ publik vs privat och nÃ¤r NAT respektive brandvÃ¤ggspolicy anvÃ¤nds.
Exempel: Skolan anvÃ¤nder privata IPv4-adresser (t.ex. 10.20.0.0/22) pÃ¥ klienterna; brandvÃ¤ggen gÃ¶r NAT mot en publik adress nÃ¤r trafiken gÃ¥r ut mot internet. I IPv6 fÃ¥r klienterna globala adresser (2001:db8:â€¦) men skyddas av brandvÃ¤ggsregler â€“ ingen NAT krÃ¤vs.
### 1.5.2 Net ID och Host ID (grunden fÃ¶rst)
Varje IPv4-adress delas logiskt i Net ID (vilket nÃ¤t/vilken broadcastdomÃ¤n) och Host ID (vilken vÃ¤rd i nÃ¤tet). NÃ¤tadressen (alla hostbitar = 0) och broadcastadressen (alla hostbitar = 1) reserveras och kan inte tilldelas vanliga hostar (undantag: /31 p2p). Att kunna peka ut dessa snabbt gÃ¶r resten av subnettingen enkel.
FÃ¶rtydligande:
- Net ID identifierar nÃ¤tet.
- Host ID identifierar vÃ¤rden i nÃ¤tet.
- Antal anvÃ¤ndbara hostar i ett subnet (IPv4) = 2^(hostbitar) âˆ’ 2.
Net ID identifierar nÃ¤tet.
Host ID identifierar vÃ¤rden i nÃ¤tet.
Antal anvÃ¤ndbara hostar i ett subnet (IPv4) = 2^(hostbitar) âˆ’ 2.
Exempel: 192.168.1.0/24: Net ID = 192.168.1.0, broadcast = 192.168.1.255, hostspann = .1â€“.254.
### 1.5.3 SubnÃ¤tmasken â€“ uppbyggnad (binÃ¤rt â†’ decimal)
SubnÃ¤tmasken markerar hur mÃ¥nga bitar som tillhÃ¶r Net ID. I binÃ¤r form Ã¤r masken en fÃ¶ljd av 1:or (nÃ¤t) fÃ¶ljt av 0:or (host). Dessa 8-bitars block (oktetter) skrivs i decimal:11111111 = 255, 11100000 = 224, 11000000 = 192, 10000000 = 128 â€¦Masken /27 betyder 27 ettor: 255.255.255.224. Blockstorleken i den â€œbrytandeâ€ oktetten styr intervallsteget mellan subnÃ¤ten.
FÃ¶rtydligande:
- En oktett Ã¤r 8 bitar: 128,64,32,16,8,4,2,1.
- /X â†” mask i decimal (t.ex. /26 â†” 255.255.255.192).
- Blockstorlek = 256 âˆ’ (oktettens maskvÃ¤rde), t.ex. 256âˆ’224 = 32.
En oktett Ã¤r 8 bitar: 128,64,32,16,8,4,2,1.
/X â†” mask i decimal (t.ex. /26 â†” 255.255.255.192).
Blockstorlek = 256 âˆ’ (oktettens maskvÃ¤rde), t.ex. 256âˆ’224 = 32.
Exempel: 192.168.10.37/27 â†’ mask 255.255.255.224 (block 32). Subnetten Ã¤r .0â€“31, .32â€“63, .64â€“95 â€¦ 37 hamnar i .32â€“63, nÃ¤t = .32, broadcast = .63, hostspann = .33â€“.62.
### 1.5.4 Klass A/B/C â€“ vad de var och deras â€œdefaultmaskerâ€
Historiskt delades IPv4 i klasser: A (1.0.0.0â€“126.0.0.0), B (128.0.0.0â€“191.255.0.0), C (192.0.0.0â€“223.255.255.0). Defaultmaskerna var /8, /16 och /24. Klassfullt tÃ¤nk anvÃ¤nds inte pÃ¥ internet lÃ¤ngre, men Ã¤r nyttigt pedagogiskt (och fÃ¶r vissa standardexempel). 127.0.0.0/8 reserveras fÃ¶r loopback.
FÃ¶rtydligande:
- Klass A: default 255.255.255.0? Nej â€” 255.0.0.0 (/8).
- Klass B: 255.255.0.0 (/16).
- Klass C: 255.255.255.0 (/24).
Klass A: default 255.255.255.0? Nej â€” 255.0.0.0 (/8).
Klass B: 255.255.0.0 (/16).
Klass C: 255.255.255.0 (/24).
Exempel: Ett â€œklass C-nÃ¤tâ€ 192.168.1.0 med defaultmask /24 har 256 adresser totalt, 254 anvÃ¤ndbara hostar.
### 1.5.5 Hur masken styr antal hostar och subnÃ¤t
NÃ¤r du lÃ¥nar hostbitar och gÃ¶r dem till nÃ¤tbitar skapas fler subnÃ¤t, men varje subnÃ¤t fÃ¥r fÃ¤rre hostar. Antal hostar = 2^(hostbitar) âˆ’ 2. Antal subnÃ¤t (inom ett givet ursprungsprefix) = 2^(antal lÃ¥nade bitar).
FÃ¶rtydligande:
- /25 (lÃ¥nar 1 bit frÃ¥n /24): 2 subnÃ¤t Ã— 126 hostar.
- /26: 4 subnÃ¤t Ã— 62 hostar.
- /27: 8 subnÃ¤t Ã— 30 hostar.
- /28: 16 subnÃ¤t Ã— 14 hostar â€¦ (se lathund nedan).
/25 (lÃ¥nar 1 bit frÃ¥n /24): 2 subnÃ¤t Ã— 126 hostar.
/26: 4 subnÃ¤t Ã— 62 hostar.
/27: 8 subnÃ¤t Ã— 30 hostar.
/28: 16 subnÃ¤t Ã— 14 hostar â€¦ (se lathund nedan).
Exempel: Behov: ca 50 klienter/klassrum ur ett 192.168.1.0/24 â†’ vÃ¤lj /26 (62 hostar) eller /27 (30 hostar) beroende pÃ¥ krav.
### 1.5.6 RÃ¤kna ut rÃ¤tt mask â€“ steg fÃ¶r steg (subnettingmetodik)
- UtgÃ¥ frÃ¥n behov: antal subnÃ¤t eller antal hostar per subnÃ¤t.
- BestÃ¤m antal bitar: subnÃ¤t â†’ 2^b â‰¥ antal subnÃ¤t; hostar â†’ 2^h âˆ’ 2 â‰¥ antal hostar.
- HÃ¤rled masken: lÃ¤gg b lÃ¥nade bitar till nÃ¤tet (Ã¶ka /X), eller hÃ¥ll h hostbitar kvar.
- Rita intervall: blockstorlek i relevant oktett = 256 âˆ’ maskoktett.
- Skriv ut tabellen: nÃ¤t, fÃ¶rsta host, sista host, broadcast.
UtgÃ¥ frÃ¥n behov: antal subnÃ¤t eller antal hostar per subnÃ¤t.
BestÃ¤m antal bitar: subnÃ¤t â†’ 2^b â‰¥ antal subnÃ¤t; hostar â†’ 2^h âˆ’ 2 â‰¥ antal hostar.
HÃ¤rled masken: lÃ¤gg b lÃ¥nade bitar till nÃ¤tet (Ã¶ka /X), eller hÃ¥ll h hostbitar kvar.
Rita intervall: blockstorlek i relevant oktett = 256 âˆ’ maskoktett.
Skriv ut tabellen: nÃ¤t, fÃ¶rsta host, sista host, broadcast.
Exempel: Du har 6 segment Ã¡ ~20 datorer ur 192.168.1.0/24. LÃ¥na 3 bitar (ger 8 subnÃ¤t), kvar blir 5 hostbitar â†’ 30 hostar/subnÃ¤t. Mask: 255.255.255.224 (/27). SubnÃ¤t: .0â€“31, .32â€“63, .64â€“95, .96â€“127, .128â€“159, .160â€“191, .192â€“223, .224â€“255.
Exempel: Samma /27 listat: Subnet 1: 192.168.1.33â€“62, Subnet 2: 65â€“94, â€¦ Subnet 6: 193â€“222.
### 1.5.7 CIDR-lathund (klass C-utgÃ¥ngslÃ¤ge /24)
Snabbreferens nÃ¤r du delar ett /24 (vanligast i Ã¶vningar):
- /25: 2 subnÃ¤t, 126 hostar vardera, mask 255.255.255.128
- /26: 4 subnÃ¤t, 62 hostar, 255.255.255.192
- /27: 8 subnÃ¤t, 30 hostar, 255.255.255.224
- /28: 16 subnÃ¤t, 14 hostar, 255.255.255.240
- /29: 32 subnÃ¤t, 6 hostar, 255.255.255.248
- /30: 64 subnÃ¤t, 2 hostar (p2p), 255.255.255.252
- /31â€“/32: sÃ¤rskilda/labb (inga vanliga hostar)(Se ocksÃ¥ din PPT-tabell â€œKombinationer av subnÃ¤tâ€.)
/25: 2 subnÃ¤t, 126 hostar vardera, mask 255.255.255.128
/26: 4 subnÃ¤t, 62 hostar, 255.255.255.192
/27: 8 subnÃ¤t, 30 hostar, 255.255.255.224
/28: 16 subnÃ¤t, 14 hostar, 255.255.255.240
/29: 32 subnÃ¤t, 6 hostar, 255.255.255.248
/30: 64 subnÃ¤t, 2 hostar (p2p), 255.255.255.252
/31â€“/32: sÃ¤rskilda/labb (inga vanliga hostar)(Se ocksÃ¥ din PPT-tabell â€œKombinationer av subnÃ¤tâ€.)
### 1.5.8 IPv6 â€“ struktur (hex) och Net ID/Interface ID
IPv6 Ã¤r 128 bitar och skrivs i hex: Ã¥tta block separerade med :. Ledande nollor kan utelÃ¤mnas per block; en fÃ¶ljd av nollblock kan komprimeras till ::. En IPv6-adress delas oftast som prefix (Net ID) + interface identifier (Host-del), dÃ¤r /64 Ã¤r standard fÃ¶r LAN/VLAN (krav fÃ¶r SLAAC och mycket annat).
FÃ¶rtydligande:
- Global unicast: 2000::/3 (publikt). ULA: fc00::/7 (internt).
- Link-local: fe80::/10 (automatiskt pÃ¥ varje interface).
- Loopback: ::1.
- /64 Ã¤r tumregel fÃ¶r vanliga LAN: 2â¶â´ adresser per VLAN.
Global unicast: 2000::/3 (publikt). ULA: fc00::/7 (internt).
Link-local: fe80::/10 (automatiskt pÃ¥ varje interface).
Loopback: ::1.
/64 Ã¤r tumregel fÃ¶r vanliga LAN: 2â¶â´ adresser per VLAN.
Exempel: Prefix 2001:db8:1200::/48 delas per hus till /56 (256 st /64 vardera). VLAN i hus A: 2001:db8:1200:00A0::/64 fÃ¶r elev, â€¦:00A1::/64 fÃ¶r personal.
### 1.5.9 IPv6 â€“ â€œmaskâ€, prefix och lathund (nibbel-tÃ¤nk)
I IPv6 talar vi om prefixlÃ¤ngd, inte mask. TÃ¤nk i nibblar (4 bitar = en hexsiffra) fÃ¶r enkel huvudrÃ¤kning. Vanliga snitt:
- /48: site-prefix (ger 4096 st /64).
- /52: 16 block Ã  /56 (varje /56 = 256 st /64).
- /56: per byggnad/zon (256 st /64).
- /60: per vÃ¥ningsplan (16 st /64).
- /64: per VLAN (standard).
/48: site-prefix (ger 4096 st /64).
/52: 16 block Ã  /56 (varje /56 = 256 st /64).
/56: per byggnad/zon (256 st /64).
/60: per vÃ¥ningsplan (16 st /64).
/64: per VLAN (standard).
Exempel: FrÃ¥n 2001:db8:1200::/48 tilldelas B-huset â€¦:1200:0100::/56. DÃ¤r kan du skapa t.ex. â€¦:0100:0010::/64 (elev) och â€¦:0100:0020::/64 (personal).
### 1.5.10 Vanliga misstag och snabba kontroller
- Fel mask/gateway â†’ klienten blir â€œensam Ã¶â€.
- RÃ¤kna alltid nÃ¤t/broadcast i IPv4 (utom /31 p2p).
- HÃ¥ll /64 i IPv6-LAN, annars kan funktioner sluta fungera.
- Dokumentera VLAN â†” prefix â†” gateway â†” DHCP/DNS.
- Testa IP fÃ¶rst, namn sen (isolerar DNS-problem).
Fel mask/gateway â†’ klienten blir â€œensam Ã¶â€.
RÃ¤kna alltid nÃ¤t/broadcast i IPv4 (utom /31 p2p).
HÃ¥ll /64 i IPv6-LAN, annars kan funktioner sluta fungera.
Dokumentera VLAN â†” prefix â†” gateway â†” DHCP/DNS.
Testa IP fÃ¶rst, namn sen (isolerar DNS-problem).
Exempel: Du planerar 70 klienter i ett klassrum men vÃ¤ljer /26 (62 hostar) â†’ rÃ¤cker inte. VÃ¤lj /25 (126 hostar) eller dela pÃ¥ tvÃ¥ /26.
### ğŸ“Œ KontrollfrÃ¥gor
- FÃ¶rklara Net ID och Host ID och ge ett snabbt sÃ¤tt att hitta nÃ¤t- och broadcastadress i ett /27-nÃ¤t.
- VarfÃ¶r Ã¤r /27 = 255.255.255.224 och vad betyder â€œblockstorlek 32â€?
- RÃ¤kna ut nÃ¤t, fÃ¶rsta/sista host och broadcast fÃ¶r 192.168.50.77/26.
- Du behÃ¶ver 6 subnÃ¤t med minst 20 hostar ur 192.168.1.0/24 â€“ vilken mask vÃ¤ljer du och varfÃ¶r?
- Vad innebÃ¤r klass A/B/C historiskt och vilka defaultmasker fÃ¶rknippas med dem?
- NÃ¤r Ã¤r /31 praktiskt och varfÃ¶r fungerar det utan broadcast?
- Skriv 2001:0db8:0000:0000:0000:0000:0042:0001 i kortaste korrekta form.
- VarfÃ¶r rekommenderas /64 fÃ¶r IPv6-LAN och vad hÃ¤nder om du anvÃ¤nder /80?
- Hur mÃ¥nga /64 ryms i ett /56-prefix? Beskriv hur du skulle fÃ¶rdela dem per VLAN.
- Vad Ã¤r den snabbaste vÃ¤gen att avgÃ¶ra om ett IPv4-subnet rÃ¤cker fÃ¶r X hostar?
FÃ¶rklara Net ID och Host ID och ge ett snabbt sÃ¤tt att hitta nÃ¤t- och broadcastadress i ett /27-nÃ¤t.
VarfÃ¶r Ã¤r /27 = 255.255.255.224 och vad betyder â€œblockstorlek 32â€?
RÃ¤kna ut nÃ¤t, fÃ¶rsta/sista host och broadcast fÃ¶r 192.168.50.77/26.
Du behÃ¶ver 6 subnÃ¤t med minst 20 hostar ur 192.168.1.0/24 â€“ vilken mask vÃ¤ljer du och varfÃ¶r?
Vad innebÃ¤r klass A/B/C historiskt och vilka defaultmasker fÃ¶rknippas med dem?
NÃ¤r Ã¤r /31 praktiskt och varfÃ¶r fungerar det utan broadcast?
Skriv 2001:0db8:0000:0000:0000:0000:0042:0001 i kortaste korrekta form.
VarfÃ¶r rekommenderas /64 fÃ¶r IPv6-LAN och vad hÃ¤nder om du anvÃ¤nder /80?
Hur mÃ¥nga /64 ryms i ett /56-prefix? Beskriv hur du skulle fÃ¶rdela dem per VLAN.
Vad Ã¤r den snabbaste vÃ¤gen att avgÃ¶ra om ett IPv4-subnet rÃ¤cker fÃ¶r X hostar?
### ğŸ”— FÃ¶rdjupningslÃ¤nkar
- RFC 791 â€“ Internet Protocol (IPv4): https://www.rfc-editor.org/rfc/rfc791
- RFC 4632 â€“ Classless Inter-Domain Routing (CIDR): https://www.rfc-editor.org/rfc/rfc4632
- RFC 1918 â€“ Private IPv4 Addressing: https://www.rfc-editor.org/rfc/rfc1918
- RFC 3021 â€“ Using 31-Bit Prefixes on IPv4 P2P Links: https://www.rfc-editor.org/rfc/rfc3021
- RFC 8200 â€“ Internet Protocol, Version 6 (IPv6): https://www.rfc-editor.org/rfc/rfc8200
- RFC 5952 â€“ IPv6 Text Representation: https://www.rfc-editor.org/rfc/rfc5952
- RFC 4193 â€“ Unique Local IPv6 Unicast Addresses (ULA): https://www.rfc-editor.org/rfc/rfc4193
- RFC 4862 â€“ IPv6 Stateless Address Autoconfiguration (SLAAC): https://www.rfc-editor.org/rfc/rfc4862
RFC 791 â€“ Internet Protocol (IPv4): https://www.rfc-editor.org/rfc/rfc791
RFC 4632 â€“ Classless Inter-Domain Routing (CIDR): https://www.rfc-editor.org/rfc/rfc4632
RFC 1918 â€“ Private IPv4 Addressing: https://www.rfc-editor.org/rfc/rfc1918
RFC 3021 â€“ Using 31-Bit Prefixes on IPv4 P2P Links: https://www.rfc-editor.org/rfc/rfc3021
RFC 8200 â€“ Internet Protocol, Version 6 (IPv6): https://www.rfc-editor.org/rfc/rfc8200
RFC 5952 â€“ IPv6 Text Representation: https://www.rfc-editor.org/rfc/rfc5952
RFC 4193 â€“ Unique Local IPv6 Unicast Addresses (ULA): https://www.rfc-editor.org/rfc/rfc4193
RFC 4862 â€“ IPv6 Stateless Address Autoconfiguration (SLAAC): https://www.rfc-editor.org/rfc/rfc4862
### âœï¸ Egna anteckningar
â€¦