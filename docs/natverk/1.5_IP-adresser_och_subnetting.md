---
title: "1.5 IP-adresser och subnetting"
parent: "Nätverk"
nav_order: 105
---

# 1.5 IP-adresser och subnetting

### 1.5.1 Vad är en IP-adress och varför använder vi dem?
En IP-adress identifierar ett nätverksinterface så att paket kan levereras rätt, ungefär som gata + postnummer för post. Det finns två versioner i bruk: IPv4 och IPv6. IPv4 har 2³² = 4 294 967 296 möjliga adresser; i praktiken färre för vanliga värdar eftersom många intervall är reserverade (t.ex. privatnät, loopback, multicast). Med fler enheter per person, servrar och sensorer tog IPv4-utrymmet i praktiken slut, vilket ledde till tekniker som CIDR (effektivare uppdelning), NAT (många interna delar på en publik adress) och hårdare återanvändning. IPv6 löser bristen med 2¹²⁸ ≈ 3,4×10³⁸ adresser och en hierarkisk modell som skalar – vanligtvis /64 per VLAN i lokala nät.
Vi skiljer också på publika och privata adresser (vilka får “synas” på internet). Publika adresser är globalt routbara och tilldelas via internetleverantörer. Privata IPv4-intervall (10/8, 172.16/12, 192.168/16) används inom organisationer och översätts via NAT när de ska ut på internet. I IPv6 motsvaras detta av Global Unicast (publikt, 2000::/3) och ULA (privat, fc00::/7) som inte ska routas på internet; i IPv6 ersätts NAT normalt av tydliga brandväggspolicys. På lagnivå finns dessutom link-local-adresser för lokal kommunikation: 169.254.0.0/16 i IPv4 (APIPA) och fe80::/10 i IPv6.
Exempel: En privat IP-adress är som ett smeknamn – bara de närmaste “i huset” (ditt lokala nät) använder det. Mamma säger kanske “lilla snuttegubben” hemma, men det säger man inte utanför väggarna. En publik adress är däremot som ditt officiella namn/adress som fungerar var du än är och som alla postkontor (routrar på internet) förstår.
För att lyckas i resten av boken behöver du tre saker:
- Se att en adress tillhör ett interface, inte “hela datorn”.
- Kunna läsa prefixlängden (t.ex. /24) och därmed skilja Net ID och Host ID.
- Förstå publik vs privat och när NAT respektive brandväggspolicy används.
Se att en adress tillhör ett interface, inte “hela datorn”.
Kunna läsa prefixlängden (t.ex. /24) och därmed skilja Net ID och Host ID.
Förstå publik vs privat och när NAT respektive brandväggspolicy används.
Exempel: Skolan använder privata IPv4-adresser (t.ex. 10.20.0.0/22) på klienterna; brandväggen gör NAT mot en publik adress när trafiken går ut mot internet. I IPv6 får klienterna globala adresser (2001:db8:…) men skyddas av brandväggsregler – ingen NAT krävs.
### 1.5.2 Net ID och Host ID (grunden först)
Varje IPv4-adress delas logiskt i Net ID (vilket nät/vilken broadcastdomän) och Host ID (vilken värd i nätet). Nätadressen (alla hostbitar = 0) och broadcastadressen (alla hostbitar = 1) reserveras och kan inte tilldelas vanliga hostar (undantag: /31 p2p). Att kunna peka ut dessa snabbt gör resten av subnettingen enkel.
Förtydligande:
- Net ID identifierar nätet.
- Host ID identifierar värden i nätet.
- Antal användbara hostar i ett subnet (IPv4) = 2^(hostbitar) − 2.
Net ID identifierar nätet.
Host ID identifierar värden i nätet.
Antal användbara hostar i ett subnet (IPv4) = 2^(hostbitar) − 2.
Exempel: 192.168.1.0/24: Net ID = 192.168.1.0, broadcast = 192.168.1.255, hostspann = .1–.254.
### 1.5.3 Subnätmasken – uppbyggnad (binärt → decimal)
Subnätmasken markerar hur många bitar som tillhör Net ID. I binär form är masken en följd av 1:or (nät) följt av 0:or (host). Dessa 8-bitars block (oktetter) skrivs i decimal:11111111 = 255, 11100000 = 224, 11000000 = 192, 10000000 = 128 …Masken /27 betyder 27 ettor: 255.255.255.224. Blockstorleken i den “brytande” oktetten styr intervallsteget mellan subnäten.
Förtydligande:
- En oktett är 8 bitar: 128,64,32,16,8,4,2,1.
- /X ↔ mask i decimal (t.ex. /26 ↔ 255.255.255.192).
- Blockstorlek = 256 − (oktettens maskvärde), t.ex. 256−224 = 32.
En oktett är 8 bitar: 128,64,32,16,8,4,2,1.
/X ↔ mask i decimal (t.ex. /26 ↔ 255.255.255.192).
Blockstorlek = 256 − (oktettens maskvärde), t.ex. 256−224 = 32.
Exempel: 192.168.10.37/27 → mask 255.255.255.224 (block 32). Subnetten är .0–31, .32–63, .64–95 … 37 hamnar i .32–63, nät = .32, broadcast = .63, hostspann = .33–.62.
### 1.5.4 Klass A/B/C – vad de var och deras “defaultmasker”
Historiskt delades IPv4 i klasser: A (1.0.0.0–126.0.0.0), B (128.0.0.0–191.255.0.0), C (192.0.0.0–223.255.255.0). Defaultmaskerna var /8, /16 och /24. Klassfullt tänk används inte på internet längre, men är nyttigt pedagogiskt (och för vissa standardexempel). 127.0.0.0/8 reserveras för loopback.
Förtydligande:
- Klass A: default 255.255.255.0? Nej — 255.0.0.0 (/8).
- Klass B: 255.255.0.0 (/16).
- Klass C: 255.255.255.0 (/24).
Klass A: default 255.255.255.0? Nej — 255.0.0.0 (/8).
Klass B: 255.255.0.0 (/16).
Klass C: 255.255.255.0 (/24).
Exempel: Ett “klass C-nät” 192.168.1.0 med defaultmask /24 har 256 adresser totalt, 254 användbara hostar.
### 1.5.5 Hur masken styr antal hostar och subnät
När du lånar hostbitar och gör dem till nätbitar skapas fler subnät, men varje subnät får färre hostar. Antal hostar = 2^(hostbitar) − 2. Antal subnät (inom ett givet ursprungsprefix) = 2^(antal lånade bitar).
Förtydligande:
- /25 (lånar 1 bit från /24): 2 subnät × 126 hostar.
- /26: 4 subnät × 62 hostar.
- /27: 8 subnät × 30 hostar.
- /28: 16 subnät × 14 hostar … (se lathund nedan).
/25 (lånar 1 bit från /24): 2 subnät × 126 hostar.
/26: 4 subnät × 62 hostar.
/27: 8 subnät × 30 hostar.
/28: 16 subnät × 14 hostar … (se lathund nedan).
Exempel: Behov: ca 50 klienter/klassrum ur ett 192.168.1.0/24 → välj /26 (62 hostar) eller /27 (30 hostar) beroende på krav.
### 1.5.6 Räkna ut rätt mask – steg för steg (subnettingmetodik)
- Utgå från behov: antal subnät eller antal hostar per subnät.
- Bestäm antal bitar: subnät → 2^b ≥ antal subnät; hostar → 2^h − 2 ≥ antal hostar.
- Härled masken: lägg b lånade bitar till nätet (öka /X), eller håll h hostbitar kvar.
- Rita intervall: blockstorlek i relevant oktett = 256 − maskoktett.
- Skriv ut tabellen: nät, första host, sista host, broadcast.
Utgå från behov: antal subnät eller antal hostar per subnät.
Bestäm antal bitar: subnät → 2^b ≥ antal subnät; hostar → 2^h − 2 ≥ antal hostar.
Härled masken: lägg b lånade bitar till nätet (öka /X), eller håll h hostbitar kvar.
Rita intervall: blockstorlek i relevant oktett = 256 − maskoktett.
Skriv ut tabellen: nät, första host, sista host, broadcast.
Exempel: Du har 6 segment á ~20 datorer ur 192.168.1.0/24. Låna 3 bitar (ger 8 subnät), kvar blir 5 hostbitar → 30 hostar/subnät. Mask: 255.255.255.224 (/27). Subnät: .0–31, .32–63, .64–95, .96–127, .128–159, .160–191, .192–223, .224–255.
Exempel: Samma /27 listat: Subnet 1: 192.168.1.33–62, Subnet 2: 65–94, … Subnet 6: 193–222.
### 1.5.7 CIDR-lathund (klass C-utgångsläge /24)
Snabbreferens när du delar ett /24 (vanligast i övningar):
- /25: 2 subnät, 126 hostar vardera, mask 255.255.255.128
- /26: 4 subnät, 62 hostar, 255.255.255.192
- /27: 8 subnät, 30 hostar, 255.255.255.224
- /28: 16 subnät, 14 hostar, 255.255.255.240
- /29: 32 subnät, 6 hostar, 255.255.255.248
- /30: 64 subnät, 2 hostar (p2p), 255.255.255.252
- /31–/32: särskilda/labb (inga vanliga hostar)(Se också din PPT-tabell “Kombinationer av subnät”.)
/25: 2 subnät, 126 hostar vardera, mask 255.255.255.128
/26: 4 subnät, 62 hostar, 255.255.255.192
/27: 8 subnät, 30 hostar, 255.255.255.224
/28: 16 subnät, 14 hostar, 255.255.255.240
/29: 32 subnät, 6 hostar, 255.255.255.248
/30: 64 subnät, 2 hostar (p2p), 255.255.255.252
/31–/32: särskilda/labb (inga vanliga hostar)(Se också din PPT-tabell “Kombinationer av subnät”.)
### 1.5.8 IPv6 – struktur (hex) och Net ID/Interface ID
IPv6 är 128 bitar och skrivs i hex: åtta block separerade med :. Ledande nollor kan utelämnas per block; en följd av nollblock kan komprimeras till ::. En IPv6-adress delas oftast som prefix (Net ID) + interface identifier (Host-del), där /64 är standard för LAN/VLAN (krav för SLAAC och mycket annat).
Förtydligande:
- Global unicast: 2000::/3 (publikt). ULA: fc00::/7 (internt).
- Link-local: fe80::/10 (automatiskt på varje interface).
- Loopback: ::1.
- /64 är tumregel för vanliga LAN: 2⁶⁴ adresser per VLAN.
Global unicast: 2000::/3 (publikt). ULA: fc00::/7 (internt).
Link-local: fe80::/10 (automatiskt på varje interface).
Loopback: ::1.
/64 är tumregel för vanliga LAN: 2⁶⁴ adresser per VLAN.
Exempel: Prefix 2001:db8:1200::/48 delas per hus till /56 (256 st /64 vardera). VLAN i hus A: 2001:db8:1200:00A0::/64 för elev, …:00A1::/64 för personal.
### 1.5.9 IPv6 – “mask”, prefix och lathund (nibbel-tänk)
I IPv6 talar vi om prefixlängd, inte mask. Tänk i nibblar (4 bitar = en hexsiffra) för enkel huvudräkning. Vanliga snitt:
- /48: site-prefix (ger 4096 st /64).
- /52: 16 block à /56 (varje /56 = 256 st /64).
- /56: per byggnad/zon (256 st /64).
- /60: per våningsplan (16 st /64).
- /64: per VLAN (standard).
/48: site-prefix (ger 4096 st /64).
/52: 16 block à /56 (varje /56 = 256 st /64).
/56: per byggnad/zon (256 st /64).
/60: per våningsplan (16 st /64).
/64: per VLAN (standard).
Exempel: Från 2001:db8:1200::/48 tilldelas B-huset …:1200:0100::/56. Där kan du skapa t.ex. …:0100:0010::/64 (elev) och …:0100:0020::/64 (personal).
### 1.5.10 Vanliga misstag och snabba kontroller
- Fel mask/gateway → klienten blir “ensam ö”.
- Räkna alltid nät/broadcast i IPv4 (utom /31 p2p).
- Håll /64 i IPv6-LAN, annars kan funktioner sluta fungera.
- Dokumentera VLAN ↔ prefix ↔ gateway ↔ DHCP/DNS.
- Testa IP först, namn sen (isolerar DNS-problem).
Fel mask/gateway → klienten blir “ensam ö”.
Räkna alltid nät/broadcast i IPv4 (utom /31 p2p).
Håll /64 i IPv6-LAN, annars kan funktioner sluta fungera.
Dokumentera VLAN ↔ prefix ↔ gateway ↔ DHCP/DNS.
Testa IP först, namn sen (isolerar DNS-problem).
Exempel: Du planerar 70 klienter i ett klassrum men väljer /26 (62 hostar) → räcker inte. Välj /25 (126 hostar) eller dela på två /26.
### 📌 Kontrollfrågor
- Förklara Net ID och Host ID och ge ett snabbt sätt att hitta nät- och broadcastadress i ett /27-nät.
- Varför är /27 = 255.255.255.224 och vad betyder “blockstorlek 32”?
- Räkna ut nät, första/sista host och broadcast för 192.168.50.77/26.
- Du behöver 6 subnät med minst 20 hostar ur 192.168.1.0/24 – vilken mask väljer du och varför?
- Vad innebär klass A/B/C historiskt och vilka defaultmasker förknippas med dem?
- När är /31 praktiskt och varför fungerar det utan broadcast?
- Skriv 2001:0db8:0000:0000:0000:0000:0042:0001 i kortaste korrekta form.
- Varför rekommenderas /64 för IPv6-LAN och vad händer om du använder /80?
- Hur många /64 ryms i ett /56-prefix? Beskriv hur du skulle fördela dem per VLAN.
- Vad är den snabbaste vägen att avgöra om ett IPv4-subnet räcker för X hostar?
Förklara Net ID och Host ID och ge ett snabbt sätt att hitta nät- och broadcastadress i ett /27-nät.
Varför är /27 = 255.255.255.224 och vad betyder “blockstorlek 32”?
Räkna ut nät, första/sista host och broadcast för 192.168.50.77/26.
Du behöver 6 subnät med minst 20 hostar ur 192.168.1.0/24 – vilken mask väljer du och varför?
Vad innebär klass A/B/C historiskt och vilka defaultmasker förknippas med dem?
När är /31 praktiskt och varför fungerar det utan broadcast?
Skriv 2001:0db8:0000:0000:0000:0000:0042:0001 i kortaste korrekta form.
Varför rekommenderas /64 för IPv6-LAN och vad händer om du använder /80?
Hur många /64 ryms i ett /56-prefix? Beskriv hur du skulle fördela dem per VLAN.
Vad är den snabbaste vägen att avgöra om ett IPv4-subnet räcker för X hostar?
### 🔗 Fördjupningslänkar
- RFC 791 – Internet Protocol (IPv4): https://www.rfc-editor.org/rfc/rfc791
- RFC 4632 – Classless Inter-Domain Routing (CIDR): https://www.rfc-editor.org/rfc/rfc4632
- RFC 1918 – Private IPv4 Addressing: https://www.rfc-editor.org/rfc/rfc1918
- RFC 3021 – Using 31-Bit Prefixes on IPv4 P2P Links: https://www.rfc-editor.org/rfc/rfc3021
- RFC 8200 – Internet Protocol, Version 6 (IPv6): https://www.rfc-editor.org/rfc/rfc8200
- RFC 5952 – IPv6 Text Representation: https://www.rfc-editor.org/rfc/rfc5952
- RFC 4193 – Unique Local IPv6 Unicast Addresses (ULA): https://www.rfc-editor.org/rfc/rfc4193
- RFC 4862 – IPv6 Stateless Address Autoconfiguration (SLAAC): https://www.rfc-editor.org/rfc/rfc4862
RFC 791 – Internet Protocol (IPv4): https://www.rfc-editor.org/rfc/rfc791
RFC 4632 – Classless Inter-Domain Routing (CIDR): https://www.rfc-editor.org/rfc/rfc4632
RFC 1918 – Private IPv4 Addressing: https://www.rfc-editor.org/rfc/rfc1918
RFC 3021 – Using 31-Bit Prefixes on IPv4 P2P Links: https://www.rfc-editor.org/rfc/rfc3021
RFC 8200 – Internet Protocol, Version 6 (IPv6): https://www.rfc-editor.org/rfc/rfc8200
RFC 5952 – IPv6 Text Representation: https://www.rfc-editor.org/rfc/rfc5952
RFC 4193 – Unique Local IPv6 Unicast Addresses (ULA): https://www.rfc-editor.org/rfc/rfc4193
RFC 4862 – IPv6 Stateless Address Autoconfiguration (SLAAC): https://www.rfc-editor.org/rfc/rfc4862
### ✍️ Egna anteckningar
…