# 3. N√§tverksadministration

## 3.4 Introduktion till CLI (inkl. Cisco-kommandon)

### 3.4.1 Vad √§r CLI och varf√∂r anv√§nda det?

CLI (Command Line Interface) √§r textbaserad administration d√§r du skriver kommandon ist√§llet f√∂r att klicka i ett GUI. F√∂r n√§tverk ger CLI precision, hastighet och reproducerbarhet: du ser exakt vad som konfigureras, kan scripta uppgifter, och f√•r samma resultat varje g√•ng. I fels√∂kning √§r CLI √∂verl√§gset eftersom du kommer √•t detaljer (tabeller, r√§kneverk, debug) som ofta saknas i ett GUI.

CLI √§r ocks√• ‚Äúspr√•ket‚Äù som f√∂renar olika fabrikat: koncepten liknar varandra √§ven om kommandona skiljer sig.

Exempel: Du hittar en duplex-mismatch genom att k√∂ra show interfaces och l√§sa felr√§knare; i GUI:n syntes bara ‚Äúl√§nk up‚Äù.

### 3.4.2 √Ötkomst till n√§tutrustning: console, SSH och sessionshygien

Du n√•r switchar/routrar via console (seriell kabel lokalt) eller SSH (krypterad fj√§rranslutning). Telnet undviks (okrypterat). I skolmilj√∂ anv√§nds ofta en terminalklient (t.ex. Windows Terminal, PuTTY) och s√§kra jump host/bastion f√∂r att n√• management-n√§tet f√∂rst.

F√∂rtydligande:

- Console: r√§ddar dig n√§r n√§tet ligger nere; kr√§ver fysisk n√§rvaro.
- SSH v2: standard f√∂r fj√§rr; st√§ng av telnet (transport input ssh).
- Sessionshygien: s√§tt exec-timeout, logging synchronous, och jobba fr√•n management-VLAN.

Console: r√§ddar dig n√§r n√§tet ligger nere; kr√§ver fysisk n√§rvaro.

SSH v2: standard f√∂r fj√§rr; st√§ng av telnet (transport input ssh).

Sessionshygien: s√§tt exec-timeout, logging synchronous, och jobba fr√•n management-VLAN.

Exempel: En felkonfigurerad trunk sl√§pper inte in dig via n√§tet. Du kopplar konsolkabel, r√§ttar VLAN-listan och √•terf√•r fj√§rr√•tkomst via SSH.

### 3.4.3 Cisco IOS ‚Äì l√§gen och hj√§lp

Cisco-CLI har tydliga l√§gen:

- user EXEC (>): l√§s-kommandon.
- privileged EXEC (#): enable f√∂r fler kommandon.
- global config ((config)#): configure terminal.
- under-l√§gen: t.ex. interface, line, router, vlan.

user EXEC (>): l√§s-kommandon.

privileged EXEC (#): enable f√∂r fler kommandon.

global config ((config)#): configure terminal.

under-l√§gen: t.ex. interface, line, router, vlan.

Navigering och hj√§lp:

- ? visar tillg√§ngliga kommandon i kontext.
- tab auto-kompletterar; delord + ? visar alternativ.
- Prefixet no negaterar (tar bort) en inst√§llning.
- do <show-kommando> funkar inne i config-l√§ge.

? visar tillg√§ngliga kommandon i kontext.

tab auto-kompletterar; delord + ? visar alternativ.

Prefixet no negaterar (tar bort) en inst√§llning.

do <show-kommando> funkar inne i config-l√§ge.

Exempel: Du skriver spanning-tree bpdug? och ser bpduguard som val ‚Äì snabb p√•minnelse utan att l√§mna l√§get.

### 3.4.4 Visa, spara och j√§mf√∂ra konfiguration

Det viktigaste ‚Äúvisa-kommandot‚Äù √§r show running-config. Spara √§ndringar med copy running-config startup-config (eller write memory). Anv√§nd filter f√∂r att hitta r√§tt rader snabbt.

F√∂rtydligande:

- Visa: show run | section interface, | include, | exclude, | begin.
- Spara: copy run start.
- J√§mf√∂r/√•terst√§ll: show archive (om aktiverat), reload in 5 som ‚Äúfallsk√§rm‚Äù inf√∂r riskfyllda √§ndringar.

Visa: show run | section interface, | include, | exclude, | begin.

Spara: copy run start.

J√§mf√∂r/√•terst√§ll: show archive (om aktiverat), reload in 5 som ‚Äúfallsk√§rm‚Äù inf√∂r riskfyllda √§ndringar.

Exempel: Du s√§tter reload in 10 innan du √§ndrar en fj√§rrtrunk. Om du tappar sessionen rullar enheten automatiskt tillbaka om du inte reload cancel:ar.

### 3.4.5 ‚ÄúShow‚Äù du anv√§nder varje dag (snabbdiagnos)

De h√§r kommandona ringar in fel p√• minuter:

F√∂rtydligande:

- L√§nk & portar: show interfaces status, show interfaces (felr√§knare, duplex/hastighet), show power inline (PoE).
- Lager 2: show vlan brief, show mac address-table, show spanning-tree, show storm-control.
- Grannar: show cdp neighbors detail och/eller show lldp neighbors detail.
- L3 & ARP: show ip interface brief, show ip route, show arp.
- WLAN/AP via controller: kanaler, SNR, klienter (vendor-specifikt).

L√§nk & portar: show interfaces status, show interfaces (felr√§knare, duplex/hastighet), show power inline (PoE).

Lager 2: show vlan brief, show mac address-table, show spanning-tree, show storm-control.

Grannar: show cdp neighbors detail och/eller show lldp neighbors detail.

L3 & ARP: show ip interface brief, show ip route, show arp.

WLAN/AP via controller: kanaler, SNR, klienter (vendor-specifikt).

Exempel: Klienten n√•r inte DHCP. show vlan brief visar att porten ligger i VLAN 1 ist√§llet f√∂r VLAN 20. Justera portprofilen och testa igen.

### 3.4.6 Grundl√§ggande lager-2-konfiguration (switch)

Det h√§r √§r k√§rnan f√∂r access- och uplink-portar.

F√∂rtydligande:

- Beskriv & profil: interface gi1/0/12 description Klassrum214-Skrivare switchport mode access switchport access vlan 20 spanning-tree portfast spanning-tree bpduguard enable
- Trunk: interface gi1/0/48 switchport mode trunk switchport trunk allowed vlan 10,20,30,40 switchport trunk native vlan 999 (oanv√§nt)
- VLAN: vlan 20 ‚Üí name ELEV

Beskriv & profil:
interface gi1/0/12
description Klassrum214-Skrivare
switchport mode access
switchport access vlan 20
spanning-tree portfast
spanning-tree bpduguard enable

Trunk:
interface gi1/0/48
switchport mode trunk
switchport trunk allowed vlan 10,20,30,40
switchport trunk native vlan 999 (oanv√§nt)

VLAN: vlan 20 ‚Üí name ELEV

Exempel: En elev kopplar in en ‚Äúsmart-switch‚Äù som skickar BPDUs. Med bpduguard enable err-disablas porten direkt och n√§tet skyddas.

### 3.4.7 Grundl√§ggande lager-3-konfiguration (SVI och routing)

P√• L3-switchar skapar du SVI:n som gateways och sl√•r p√• routing. P√• routrar konfigurerar du adresser per gr√§nssnitt.

F√∂rtydligande:

- SVI & routing: interface vlan 20 ip address 10.20.0.1 255.255.252.0 no shutdown ip routing
- Statik: ip route 0.0.0.0 0.0.0.0 10.0.0.1
- OSPF exempel: router ospf 1 network 10.20.0.0 0.0.3.255 area 0

SVI & routing:
interface vlan 20
ip address 10.20.0.1 255.255.252.0
no shutdown
ip routing

Statik: ip route 0.0.0.0 0.0.0.0 10.0.0.1

OSPF exempel:
router ospf 1
network 10.20.0.0 0.0.3.255 area 0

Exempel: Efter att ha lagt till SVI f√∂r VLAN 40 kan elever n√• servrar f√∂rst n√§r ip routing aktiveras. Utan den stannar trafiken p√• L2.

### 3.4.8 H√§rda √•tkomst och management

S√§kra accessen innan du sl√§pper l√∂s n√§tet.

F√∂rtydligande:

- SSH v2 & anv√§ndare: ip domain-name skolan.local crypto key generate rsa modulus 2048 username admin secret <l√•ngt-l√∂senord> line vty 0 4 ‚Üí transport input ssh ‚Üí login local ‚Üí exec-timeout 10
- Banners: banner login f√∂r juridisk varning.
- Syslog/NTP: service timestamps log datetime msec + skicka loggar; st√§ll NTP.
- AAA/RADIUS (√∂versikt): central auth (beskrivs mer i senare kapitel).

SSH v2 & anv√§ndare:
ip domain-name skolan.local
crypto key generate rsa modulus 2048
username admin secret <l√•ngt-l√∂senord>
line vty 0 4 ‚Üí transport input ssh ‚Üí login local ‚Üí exec-timeout 10

Banners: banner login f√∂r juridisk varning.

Syslog/NTP: service timestamps log datetime msec + skicka loggar; st√§ll NTP.

AAA/RADIUS (√∂versikt): central auth (beskrivs mer i senare kapitel).

Exempel: Efter att ha st√§ngt Telnet med transport input ssh och lagt login local syns inloggningar i syslog med korrekta tidsst√§mplar.

### 3.4.9 Effektivitet i CLI (sm√• knep som sparar timmar)

Sm√• vanor g√∂r stor skillnad.

F√∂rtydligande:

- Historik & redigering: piltangenter, ctrl-a/e (b√∂rjan/slut), ctrl-u (rensa).
- R√∂rledning: show run | section interface ‚Üí kopiera bara det du beh√∂ver.
- Interface-range: interface range gi1/0/1-24 f√∂r mass√§ndringar.
- Alias: alias exec svi show ip interface brief | include Vlan (snabbvy).
- ‚ÄúDo show‚Äù i config: slipp hoppa mellan l√§gen.

Historik & redigering: piltangenter, ctrl-a/e (b√∂rjan/slut), ctrl-u (rensa).

R√∂rledning: show run | section interface ‚Üí kopiera bara det du beh√∂ver.

Interface-range: interface range gi1/0/1-24 f√∂r mass√§ndringar.

Alias: alias exec svi show ip interface brief | include Vlan (snabbvy).

‚ÄúDo show‚Äù i config: slipp hoppa mellan l√§gen.

Exempel: Du beh√∂ver sl√• p√• portfast p√• 24 portar. Med interface range g√∂r du det p√• 10 sekunder ist√§llet f√∂r 10 minuter.

### 3.4.10 Vanliga fallgropar och hur du undviker dem

M√•nga incidenter beror p√• sm√• missar.

F√∂rtydligande:

- Gl√∂md ‚Äúwrite‚Äù: √§ndringar √∂verlever inte om du inte sparar.
- Fel VLAN p√• accessport: ser ‚Äúl√§nk up‚Äù men klienten hamnar i fel n√§t.
- Ofullst√§ndig trunk: VLAN saknas i allowed vlan.
- Looprisk: portfast saknas p√• klientportar ‚Üí l√•ng konvergens.
- Telnet kvar: okrypterade l√∂senord p√• n√§tet.

Gl√∂md ‚Äúwrite‚Äù: √§ndringar √∂verlever inte om du inte sparar.

Fel VLAN p√• accessport: ser ‚Äúl√§nk up‚Äù men klienten hamnar i fel n√§t.

Ofullst√§ndig trunk: VLAN saknas i allowed vlan.

Looprisk: portfast saknas p√• klientportar ‚Üí l√•ng konvergens.

Telnet kvar: okrypterade l√∂senord p√• n√§tet.

Exempel: ‚ÄúAllt funkar ‚Äì tills omstart.‚Äù Klassikern: copy run start gl√∂mdes. Inf√∂r rutin: spara och verifiera varje change.

### 

### üìå Kontrollfr√•gor

- N√§r √§r Console n√∂dv√§ndigt och n√§r r√§cker SSH?
- Vilka l√§gen finns i Cisco-CLI och vad g√∂r no-prefixet?
- Hur anv√§nder du ?, tab och do f√∂r att arbeta snabbare och s√§krare?
- Vad g√∂r show interfaces respektive show vlan brief och n√§r anv√§nder du dem?
- Ge tre steg f√∂r att fels√∂ka en port som ‚Äúser upp‚Äù men d√§r klienten inte f√•r IP.
- Skriv de fyra raderna som g√∂r en port till s√§ker accessport f√∂r klient: VLAN, portfast, bpduguard, description.
- Hur aktiverar du L3-routing p√• en switch och konfigurerar en SVI-gateway?
- Vilka inst√§llningar kr√§vs f√∂r att s√§kra fj√§rr√•tkomst (SSH v2, login, timeout, timestamps)?
- N√§r anv√§nder du reload in och varf√∂r √§r det smart vid fj√§rr√§ndringar?
- N√§mn tre vanliga fallgropar i trunk-konfigurationer och hur du uppt√§cker dem.

N√§r √§r Console n√∂dv√§ndigt och n√§r r√§cker SSH?

Vilka l√§gen finns i Cisco-CLI och vad g√∂r no-prefixet?

Hur anv√§nder du ?, tab och do f√∂r att arbeta snabbare och s√§krare?

Vad g√∂r show interfaces respektive show vlan brief och n√§r anv√§nder du dem?

Ge tre steg f√∂r att fels√∂ka en port som ‚Äúser upp‚Äù men d√§r klienten inte f√•r IP.

Skriv de fyra raderna som g√∂r en port till s√§ker accessport f√∂r klient: VLAN, portfast, bpduguard, description.

Hur aktiverar du L3-routing p√• en switch och konfigurerar en SVI-gateway?

Vilka inst√§llningar kr√§vs f√∂r att s√§kra fj√§rr√•tkomst (SSH v2, login, timeout, timestamps)?

N√§r anv√§nder du reload in och varf√∂r √§r det smart vid fj√§rr√§ndringar?

N√§mn tre vanliga fallgropar i trunk-konfigurationer och hur du uppt√§cker dem.

### 

### üîó F√∂rdjupningsl√§nkar

- Cisco ‚Äì Introduction to the Cisco IOS CLI (guide): https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/fundamentals/configuration/15-s/fund-15-s-book/cf_cli.html
- Cisco ‚Äì Basic Switch Configuration: https://www.cisco.com/c/en/us/support/docs/lan-switching/catalyst-2960-x-series-switches/118763-config-2960x-00.html
- Cisco ‚Äì Using the show and filtering pipelines: https://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-operating-system-ios/7133-logging.html
- OpenSSH ‚Äì Secure Shell best practices: https://www.openssh.com/manual.html
- Microsoft ‚Äì Windows Terminal & OpenSSH Client: https://learn.microsoft.com/windows/terminal/
- man7 ‚Äì Linux ip och ss referens (iproute2): https://man7.org/linux/man-pages/man8/ip.8.html
- Wireshark ‚Äì User Guide (f√∂r djup fels√∂kning): https://www.wireshark.org/docs/wsug_html_chunked/

Cisco ‚Äì Introduction to the Cisco IOS CLI (guide): https://www.cisco.com/c/en/us/td/docs/ios-xml/ios/fundamentals/configuration/15-s/fund-15-s-book/cf_cli.html

Cisco ‚Äì Basic Switch Configuration: https://www.cisco.com/c/en/us/support/docs/lan-switching/catalyst-2960-x-series-switches/118763-config-2960x-00.html

Cisco ‚Äì Using the show and filtering pipelines: https://www.cisco.com/c/en/us/support/docs/ios-nx-os-software/ios-operating-system-ios/7133-logging.html

OpenSSH ‚Äì Secure Shell best practices: https://www.openssh.com/manual.html

Microsoft ‚Äì Windows Terminal & OpenSSH Client: https://learn.microsoft.com/windows/terminal/

man7 ‚Äì Linux ip och ss referens (iproute2): https://man7.org/linux/man-pages/man8/ip.8.html

Wireshark ‚Äì User Guide (f√∂r djup fels√∂kning): https://www.wireshark.org/docs/wsug_html_chunked/

### 

### ‚úçÔ∏è Egna anteckningar

‚Ä¶


