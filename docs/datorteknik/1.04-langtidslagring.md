## 1.4 Långtidslagring

### 1.4.0 Inledning

Långtidslagring är det som gör att vi kan spara data permanent på en dator – till skillnad från RAM som är volatilt och försvinner när strömmen bryts. Operativsystem, program, bilder, dokument och spel lagras på enheter som är gjorda för att hålla data även när datorn stängs av.

De vanligaste typerna av långtidslagring idag är HDD (hårddiskar), SATA SSD och NVMe SSD. NVMe-enheter i M.2-formfaktor har blivit standard i nya datorer de senaste åren, tack vare mycket högre hastigheter. 2,5" SATA-SSD används ofta som billigare eller enklare komplement, medan HDD främst används för billig långtidslagring av stora datamängder – till exempel i servrar eller NAS-system.

### 1.4.1 HDD – Hårddiskar

✅ Uppbyggnad: En hårddisk är en mekanisk lagringsenhet med roterande magnetiska skivor (platter) och ett läs/skrivhuvud. Den är billig per gigabyte och lämpar sig därför mycket bra för arkivering, backup och serverbruk där stora datamängder behöver sparas till låg kostnad.

Idag används HDD allt mindre som primär lagring i konsumentdatorer, men den är fortfarande oumbärlig för långtidslagring av stora volymer data.

✅ Teknik:

- Skivorna roterar i hög hastighet (vanligtvis 5400 eller 7200 varv per minut – RPM).
- Data organiseras i spår och sektorer.
- Läs/skrivarmen flyttar sig för att nå rätt plats på skivan.

✅ Kluster och defragmentering: Data sparas i små enheter som kallas kluster. När filer skrivs över tid kan de bli splittrade (fragmenterade) över skivan. Detta gör att läsarmen måste hoppa fram och tillbaka, vilket gör hårddisken långsammare.

Defragmentering är en process som flyttar och sammanfogar kluster så att filer ligger i ordning – vilket minskar söktiden och gör hårddisken snabbare. På mekaniska diskar är detta viktigt underhåll.

✅ Hastigheter:

- 5400 RPM: ca 80–100 MB/s sekventiell läs/skriv.
- 7200 RPM: ca 120–160 MB/s.
- Enterprise-diskar kan nå ännu högre.

✅ Anslutningar: Nästan alla moderna HDD använder SATA-anslutning, vilket är standard för interna diskar.

### 

### 1.4.2 SSD – Solid State Drives

✅ Uppbyggnad: SSD saknar rörliga delar och använder flashminne (NAND) för att lagra data. De finns både som 2,5" SATA-SSD och som NVMe-enheter i M.2-formfaktor.

2,5" SATA-SSD används idag ofta som en billigare eller enklare uppgradering i äldre system eller som extra lagring, men har lägre hastigheter än NVMe. NVMe-SSD i M.2 är däremot den vanligaste lösningen i nya datorbyggen tack vare sina mycket högre överföringshastigheter.

✅ Teknik:

- NAND-flash lagrar data som elektriska laddningar.
- Finns olika typer av NAND beroende på hur många bitar som lagras per cell:
  - SLC (Single Level Cell) – 1 bit/cell, dyrt men snabbt och hållbart.
  - MLC (Multi Level Cell) – 2 bitar/cell.
  - TLC (Triple Level Cell) – 3 bitar/cell, vanligast för konsument.
  - QLC (Quad Level Cell) – 4 bitar/cell, billigare men långsammare och mindre hållbart.

✅ Kluster, trim och varför man aldrig defragmenterar SSD: SSD har också filsystemkluster men fungerar annorlunda än HDD. Istället för att läsa sekventiellt med en arm kan SSD:n direkt nå alla minnesceller.

Fragmentering påverkar därför inte prestanda på samma sätt. Att defragmentera en SSD är faktiskt dåligt eftersom det orsakar onödigt skrivslitage.

Istället använder man fstrim (eller TRIM-kommandot i Windows) som berättar för SSD:n vilka block som inte längre används, så att den kan optimera platsen och förbereda block för att skriva effektivt. TRIM är viktigt för att hålla prestandan hög över tid.

✅ Hastigheter:

- SATA SSD: ca 400–550 MB/s (begränsas av SATA-bussen).
- NVMe SSD (se nästa avsnitt): flera GB/s.

✅ Anslutningar:

- SATA (2,5" formfaktor).
- M.2-kort som använder SATA eller NVMe.

### 1.4.3 NVMe – M.2 och PCIe-lagring

✅ Vad är NVMe? NVMe (Non-Volatile Memory Express) är ett modernt protokoll för SSD:er som använder PCIe-bussen istället för SATA. Det är idag standardvalet för primär lagring i nya datorer, tack vare mycket högre hastigheter och lägre latens.

NVMe-enheter kommer oftast i M.2-formfaktor, ett litet kort som sätts direkt på moderkortet. De har blivit den vanligaste formen av systemdisk i stationära och bärbara datorer de senaste åren.

✅ Uppbyggnad:

- Består av NAND-flash och en kontroller precis som andra SSD:er.
- Fysiskt ofta i M.2-formfaktor som är ett litet kort direkt på moderkortet.
- Kan också finnas som PCIe-kort eller i U.2/enterprise-form.

✅ Teknikfördelar:

- Mycket fler parallella kommandon än SATA.
- Lägre latens tack vare direktkoppling till CPU via PCIe.
- Mindre overhead.

✅ Hastigheter:

- NVMe SSD kan ofta nå 3000–7000+ MB/s.
- Nya PCIe 4.0/5.0-enheter kan vara ännu snabbare.

✅ Anslutningar:

- M.2-slot på moderkortet (vanligast).
- U.2 för enterprise/server.
- PCIe-slot direkt på moderkortet (adapterkort).

### 

### 1.4.4 Diskussions- och kontrollfrågor

- Vad är skillnaden mellan HDD och SSD?
- Varför behöver man defragmentera en HDD?
- Varför ska man inte defragmentera en SSD?
- Vad gör TRIM på en SSD?
- Vad är NVMe och varför är det snabbare än SATA?
- Vilka anslutningar används för lagring i en dator?

### 

### 1.4.5 Fördjupande länkar

- Kingston – SSD vs HDD [https://www.kingston.com/en/blog/pc-performance/ssd-vs-hdd](https://www.kingston.com/en/blog/pc-performance/ssd-vs-hdd)
- Crucial – What is NVMe? [https://www.crucial.com/articles/about-ssd/what-is-nvme-ssd](https://www.crucial.com/articles/about-ssd/what-is-nvme-ssd)
- Wikipedia – Hard Disk Drive [https://en.wikipedia.org/wiki/Hard_disk_drive](https://en.wikipedia.org/wiki/Hard_disk_drive)
- Wikipedia – Solid-state drive [https://en.wikipedia.org/wiki/Solid-state_drive](https://en.wikipedia.org/wiki/Solid-state_drive)

### 1.4.6 Egna anteckningar

(Här kan du som elev skriva egna anteckningar om lagring, frågor eller reflektioner)
