---
title: "9.7 Linux OS-härdning (Operating System Hardening)"
parent: "Datorteknik"
nav_order: 907
---

# 9.7 Linux OS-härdning (Operating System Hardening)

Att ”härda” ett operativsystem betyder att minska dess sårbarheter genom att ta bort onödiga tjänster, stänga oanvända portar, aktivera säkerhetsfunktioner och kontrollera åtkomst. I Linuxmiljö handlar det om att ställa in systemet så säkert som möjligt, utan att påverka dess funktion.
Grundregeln: Ju färre funktioner som är aktiva – desto mindre finns att attackera.
#### CIS Benchmarks – säkerhetsstandard att följa
Center for Internet Security (CIS) publicerar detaljerade guider för hur man säkrar olika operativsystem, inklusive Ubuntu, Debian och andra Linux-distributioner.
CIS-benchmarks innehåller:
- Rekommenderade inställningar för användarkonton, loggning, nätverkstjänster
- Tips på filbehörigheter, bootloader-skydd, m.m.
- Kommandon för att kontrollera och verifiera säkerhetsnivån
Rekommenderade inställningar för användarkonton, loggning, nätverkstjänster
Tips på filbehörigheter, bootloader-skydd, m.m.
Kommandon för att kontrollera och verifiera säkerhetsnivån
Exempel på verktyg:
- Lynis – ett kommandoradsverktyg som skannar systemet och föreslår förbättringar baserat på säkerhetsprinciper
- CIS-CAT – ett Java-baserat verktyg från CIS som kontrollerar om systemet följer benchmarkrekommendationerna (compliance)
Lynis – ett kommandoradsverktyg som skannar systemet och föreslår förbättringar baserat på säkerhetsprinciper
CIS-CAT – ett Java-baserat verktyg från CIS som kontrollerar om systemet följer benchmarkrekommendationerna (compliance)
Tips: Lynis är särskilt användbart i undervisning eftersom det är lätt att köra och ger pedagogiska resultat.
#### AppArmor & SELinux – kontrollera vad processer får göra
AppArmor (Application Armor) och SELinux (Security-Enhanced Linux) är så kallade Mandatory Access Control-system (MAC). De fungerar som extraskydd ovanpå vanliga filrättigheter (t.ex. chmod).
AppArmor:
- Lättare att förstå och administrera
- Har färdiga profiler för vanliga program (t.ex. apache2, mysql, ping)
- Status kollas med sudo aa-status
Lättare att förstå och administrera
Har färdiga profiler för vanliga program (t.ex. apache2, mysql, ping)
Status kollas med sudo aa-status
SELinux:
- Mer avancerat men svårare att felsöka
- Vanligt i enterprisemiljöer (t.ex. Red Hat, CentOS)
- Status: sestatus
Mer avancerat men svårare att felsöka
Vanligt i enterprisemiljöer (t.ex. Red Hat, CentOS)
Status: sestatus
Tips: I Ubuntu- och Debianmiljöer rekommenderas AppArmor för att det är mer användarvänligt och räcker gott för de flesta skolmiljöer.
#### Secure Boot – skydda redan vid uppstart
Secure Boot är ett säkerhetsläge i UEFI (Unified Extensible Firmware Interface) som ser till att endast signerade kärnor och program laddas vid uppstart. Det förhindrar att angripare injicerar skadlig kod (t.ex. rootkits) innan operativsystemet ens har startat.
I Linux:
- Måste vara aktiverat i BIOS/UEFI
- Kräver ofta att kärnmoduler är signerade digitalt
- Vid installation av proprietära drivrutiner kan användaren behöva "enrolla" en nyckel via MOK (Machine Owner Key)
Måste vara aktiverat i BIOS/UEFI
Kräver ofta att kärnmoduler är signerade digitalt
Vid installation av proprietära drivrutiner kan användaren behöva "enrolla" en nyckel via MOK (Machine Owner Key)
Tips: Secure Boot fungerar väl med Ubuntu LTS-versioner, men kan kräva manuell bekräftelse vid installation av tredjepartsdrivrutiner.
#### Kryptera diskar och partitioner
Fysisk säkerhet är inte alltid nog – särskilt inte för bärbara enheter. Kryptering gör att datan blir oläsbar utan rätt nyckel, även om någon plockar ur hårddisken och försöker läsa den på en annan dator.
Vanliga alternativ:
- LUKS (Linux Unified Key Setup) – standard för full diskkryptering i t.ex. Ubuntu. Aktiveras ofta under installation med alternativet "Kryptera hela disken". Används tillsammans med verktyget cryptsetup.
- eCryptfs – tidigare populärt för att kryptera hemmakataloger, men är idag mindre vanligt.
- ZFS Native Encryption – används i ZFS-baserade system och ger flexibel kryptering per dataset.
LUKS (Linux Unified Key Setup) – standard för full diskkryptering i t.ex. Ubuntu. Aktiveras ofta under installation med alternativet "Kryptera hela disken". Används tillsammans med verktyget cryptsetup.
eCryptfs – tidigare populärt för att kryptera hemmakataloger, men är idag mindre vanligt.
ZFS Native Encryption – används i ZFS-baserade system och ger flexibel kryptering per dataset.
Tips: På bärbara datorer bör full diskkryptering alltid användas. På stationära system räcker det ofta att kryptera viktiga kataloger som /home.
#### Partitionering som säkerhetsåtgärd
Att dela upp disken i flera partitioner gör att olika delar av systemet är isolerade från varandra. Det minskar risken för att ett misstag – som att loggfiler fyller disken – påverkar hela systemet.
Rekommenderade separata partitioner:
- /home – användardata
- /var – loggar, cache, e-post, databaser m.m.
- /tmp – tillfälliga filer
- /boot – uppstartsdata (i vissa fall)
/home – användardata
/var – loggar, cache, e-post, databaser m.m.
/tmp – tillfälliga filer
/boot – uppstartsdata (i vissa fall)
Vanliga mount-alternativ för ökad säkerhet:
- noexec – tillåter inte körbara filer (bra för t.ex. /tmp)
- nosuid – förhindrar att SUID-program körs med höjda rättigheter
- nodev – tillåter inte skapande av enhetsfiler
noexec – tillåter inte körbara filer (bra för t.ex. /tmp)
nosuid – förhindrar att SUID-program körs med höjda rättigheter
nodev – tillåter inte skapande av enhetsfiler
Tips:
Vill du snabbt se vilka mount-alternativ som används?Kör:mount | grep "^/"ellerfindmnt
### 9.7.1 Kontrollfrågor
- Vad menas med att "härda" ett operativsystem?
- Vad är CIS Benchmarks och varför är de användbara?
- Vad är skillnaden mellan AppArmor och SELinux?
- Vad gör Secure Boot, och varför är det viktigt?
- Vad är LUKS och när används det?
- Vad är fördelen med att ha flera partitioner i Linux?
- Vad betyder mount-alternativen noexec, nosuid och nodev?
- Vad är skillnaden mellan fysisk säkerhet och systemhärdning?
- Vilka Linux-kommandon kan användas för att kontrollera AppArmor-status?
- Varför bör /tmp monteras med begränsningar?
Vad menas med att "härda" ett operativsystem?
Vad är CIS Benchmarks och varför är de användbara?
Vad är skillnaden mellan AppArmor och SELinux?
Vad gör Secure Boot, och varför är det viktigt?
Vad är LUKS och när används det?
Vad är fördelen med att ha flera partitioner i Linux?
Vad betyder mount-alternativen noexec, nosuid och nodev?
Vad är skillnaden mellan fysisk säkerhet och systemhärdning?
Vilka Linux-kommandon kan användas för att kontrollera AppArmor-status?
Varför bör /tmp monteras med begränsningar?
### 9.7.2 Fördjupningslänkar
- CIS Benchmarks – https://www.cisecurity.org/cis-benchmarks
- AppArmor Guide (Ubuntu) – https://wiki.ubuntu.com/AppArmor
- SELinux Project – https://selinuxproject.org/page/Main_Page
- Ubuntu LUKS Encryption – https://help.ubuntu.com/community/Full_Disk_Encryption_Howto_2019
- Red Hat – Linux Partitioning and Mount Options – https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-mounting-file-systems
CIS Benchmarks – https://www.cisecurity.org/cis-benchmarks
AppArmor Guide (Ubuntu) – https://wiki.ubuntu.com/AppArmor
SELinux Project – https://selinuxproject.org/page/Main_Page
Ubuntu LUKS Encryption – https://help.ubuntu.com/community/Full_Disk_Encryption_Howto_2019
Red Hat – Linux Partitioning and Mount Options – https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/storage_administration_guide/ch-mounting-file-systems
### 9.7.3 Egna anteckningar
(Här kan du som elev skriva ned viktiga reflektioner, kommandon du vill minnas, eller egna exempel på säkerhetsåtgärder du använder i dina system.)