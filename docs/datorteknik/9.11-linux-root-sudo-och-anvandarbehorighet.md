# 9 Introduktion till IT-s√§kerhet

## 9.11 Linux root, sudo och anv√§ndarbeh√∂righet

I Linux √§r s√§kerheten starkt kopplad till hur anv√§ndarbeh√∂righeter hanteras. Den mest kraftfulla anv√§ndaren √§r root, som har obegr√§nsad tillg√•ng till hela systemet. Att f√∂rst√• hur root, sudo och beh√∂righeter fungerar √§r en grundf√∂ruts√§ttning f√∂r att s√§kra ett Linuxsystem.

#### Root ‚Äì superanv√§ndaren

root √§r den administrativa anv√§ndaren i Linux ‚Äì ofta kallad superuser. Den har fullst√§ndiga r√§ttigheter till alla filer, kataloger, processer och kommandon. Inloggning som root kan vara farligt, eftersom:

- Alla kommandon k√∂rs utan begr√§nsning ‚Äì ett felsteg kan krascha systemet.
- Root-inloggning loggas ofta inte separat, vilket f√∂rsv√•rar sp√•rbarhet.
- Om en angripare f√•r root-access √§r systemet i praktiken helt √∂vertaget.

Alla kommandon k√∂rs utan begr√§nsning ‚Äì ett felsteg kan krascha systemet.

Root-inloggning loggas ofta inte separat, vilket f√∂rsv√•rar sp√•rbarhet.

Om en angripare f√•r root-access √§r systemet i praktiken helt √∂vertaget.

D√§rf√∂r rekommenderas att man anv√§nder sudo ist√§llet ‚Äì ett verktyg som tillf√§lligt ger root-r√§ttigheter till vanliga anv√§ndare.

#### sudo ‚Äì tillf√§llig superkraft

Med sudo kan en vanlig anv√§ndare k√∂ra specifika kommandon med administrat√∂rsr√§ttigheter. Exempel:


sudo apt update

Vid f√∂rsta anv√§ndningen (eller efter en timeout) kr√§vs l√∂senord, vilket loggas i systemet. F√∂rdelarna med sudo:

- Du vet vem som k√∂rde vad ‚Äì loggar skapas i /var/log/auth.log
- R√§ttigheterna √§r tillf√§lliga ‚Äì du √§r inte permanent superuser
- Det g√•r att begr√§nsa anv√§ndares r√§ttigheter till specifika kommandon

Du vet vem som k√∂rde vad ‚Äì loggar skapas i /var/log/auth.log

R√§ttigheterna √§r tillf√§lliga ‚Äì du √§r inte permanent superuser

Det g√•r att begr√§nsa anv√§ndares r√§ttigheter till specifika kommandon

Konfigurationen sker i /etc/sudoers, och b√∂r alltid redigeras med:


sudo visudo

üë§ Exempel p√• begr√§nsad sudo-access:


student ALL=(ALL) NOPASSWD: /usr/sbin/service apache2 restart

H√§r till√•ts anv√§ndaren student att starta om Apache utan att ange l√∂senord ‚Äì men inget annat.

#### Anv√§ndar- och grupphantering

Varje anv√§ndare i Linux har ett UID (User ID), och varje grupp har ett GID (Group ID). Alla filer och kataloger har tre beh√∂righetsniv√•er:

| Symbol | Betydelse | Vad det ger r√§tt till |
| --- | --- | --- |
| r | read | L√§sa filer eller lista kataloger |
| w | write | Skriva till filer eller √§ndra inneh√•ll |
| x | execute | K√∂ra filer eller g√• in i kataloger |

Symbol

Betydelse

Vad det ger r√§tt till

r

read

L√§sa filer eller lista kataloger

w

write

Skriva till filer eller √§ndra inneh√•ll

x

execute

K√∂ra filer eller g√• in i kataloger

üëÅ Exempel:


-rwxr-xr-- 1 robin admin 4200 jul 18 10:00 script.sh

- rwx ‚Äì anv√§ndaren robin kan l√§sa, skriva, k√∂ra
- r-x ‚Äì gruppen admin kan l√§sa och k√∂ra
- r-- ‚Äì andra anv√§ndare f√•r endast l√§sa

rwx ‚Äì anv√§ndaren robin kan l√§sa, skriva, k√∂ra

r-x ‚Äì gruppen admin kan l√§sa och k√∂ra

r-- ‚Äì andra anv√§ndare f√•r endast l√§sa

#### Byta √§gare och r√§ttigheter

üìÇ Byta √§gare och grupp:


sudo chown robin:admin fil.txt

üîí √Ñndra beh√∂righeter (numeriskt eller symboliskt):


chmod 755 script.sh

chmod u+x fil.sh # L√§gg till k√∂rbarhet f√∂r √§gare

üë• L√§gg till en anv√§ndare i en grupp:


sudo usermod -aG sudo student

-aG st√•r f√∂r "append to Group" ‚Äì viktigt f√∂r att inte skriva √∂ver befintliga grupper.

#### Vanliga misstag och fallgropar

- Undvik att ge alla anv√§ndare full sudo-access utan eftertanke.
- Anv√§nd NOPASSWD endast i s√§rskilda, s√§kra sammanhang.
- H√•ll koll p√• vem som kan g√∂ra vad ‚Äì anv√§nd loggarna i /var/log/auth.log.
- Logga aldrig in som root om du inte m√•ste ‚Äì s√§rskilt inte via SSH.

Undvik att ge alla anv√§ndare full sudo-access utan eftertanke.

Anv√§nd NOPASSWD endast i s√§rskilda, s√§kra sammanhang.

H√•ll koll p√• vem som kan g√∂ra vad ‚Äì anv√§nd loggarna i /var/log/auth.log.

Logga aldrig in som root om du inte m√•ste ‚Äì s√§rskilt inte via SSH.

üí° Tips: P√• m√•nga moderna system (t.ex. Ubuntu) √§r root-kontot inaktiverat som standard. Administrat√∂rer anv√§nder ist√§llet ett vanligt konto med sudo-r√§ttigheter.


### 9.11.1 Kontrollfr√•gor

- Vad √§r root-anv√§ndarens roll i Linux?
- Varf√∂r b√∂r man undvika att arbeta direkt som root?
- Vad g√∂r kommandot sudo, och varf√∂r anv√§nds det ist√§llet f√∂r root-inloggning?
- Vad g√∂r visudo, och varf√∂r b√∂r man anv√§nda det ist√§llet f√∂r att direkt redigera /etc/sudoers?
- Vad inneb√§r r√§ttigheterna r, w och x f√∂r filer och kataloger?
- Vad g√∂r kommandot chown, och vad betyder syntaxen robin:admin?
- Vad √§r skillnaden mellan chmod 755 och chmod 700?
- Hur l√§gger man till en anv√§ndare i en grupp, t.ex. sudo-gruppen?
- Vad √§r syftet med att begr√§nsa vilka kommandon en anv√§ndare f√•r k√∂ra med sudo?
- Var kan man hitta loggar √∂ver anv√§ndning av sudo?

Vad √§r root-anv√§ndarens roll i Linux?

Varf√∂r b√∂r man undvika att arbeta direkt som root?

Vad g√∂r kommandot sudo, och varf√∂r anv√§nds det ist√§llet f√∂r root-inloggning?

Vad g√∂r visudo, och varf√∂r b√∂r man anv√§nda det ist√§llet f√∂r att direkt redigera /etc/sudoers?

Vad inneb√§r r√§ttigheterna r, w och x f√∂r filer och kataloger?

Vad g√∂r kommandot chown, och vad betyder syntaxen robin:admin?

Vad √§r skillnaden mellan chmod 755 och chmod 700?

Hur l√§gger man till en anv√§ndare i en grupp, t.ex. sudo-gruppen?

Vad √§r syftet med att begr√§nsa vilka kommandon en anv√§ndare f√•r k√∂ra med sudo?

Var kan man hitta loggar √∂ver anv√§ndning av sudo?


### 

### 9.11.2 F√∂rdjupningsl√§nkar

- Ubuntu ‚Äì Users and Groups: https://ubuntu.com/server/docs/users-and-groups
- DigitalOcean ‚Äì How To Use Sudo on Ubuntu: https://www.digitalocean.com/community/tutorials/how-to-use-sudo-on-ubuntu
- Linuxize ‚Äì Linux File Permissions Explained: https://linuxize.com/post/linux-file-permissions/
- Red Hat ‚Äì Introduction to the sudo Command: https://www.redhat.com/sysadmin/sudo-command
- Ubuntu Manpages ‚Äì visudo: https://manpages.ubuntu.com/manpages/focal/en/man8/visudo.8.html

Ubuntu ‚Äì Users and Groups:
 https://ubuntu.com/server/docs/users-and-groups

DigitalOcean ‚Äì How To Use Sudo on Ubuntu:
 https://www.digitalocean.com/community/tutorials/how-to-use-sudo-on-ubuntu

Linuxize ‚Äì Linux File Permissions Explained:
 https://linuxize.com/post/linux-file-permissions/

Red Hat ‚Äì Introduction to the sudo Command:
 https://www.redhat.com/sysadmin/sudo-command

Ubuntu Manpages ‚Äì visudo:
 https://manpages.ubuntu.com/manpages/focal/en/man8/visudo.8.html


### 

### 9.11.3 Egna anteckningar

(L√§mna plats f√∂r egna reflektioner, exempel och kommandon)


