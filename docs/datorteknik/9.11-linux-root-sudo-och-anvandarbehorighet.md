## 9.11 Linux root, sudo och anvÃ¤ndarbehÃ¶righet

I Linux Ã¤r sÃ¤kerheten starkt kopplad till hur anvÃ¤ndarbehÃ¶righeter hanteras. Den mest kraftfulla anvÃ¤ndaren Ã¤r root, som har obegrÃ¤nsad tillgÃ¥ng till hela systemet. Att fÃ¶rstÃ¥ hur root, sudo och behÃ¶righeter fungerar Ã¤r en grundfÃ¶rutsÃ¤ttning fÃ¶r att sÃ¤kra ett Linuxsystem.

#### Root â€“ superanvÃ¤ndaren

root Ã¤r den administrativa anvÃ¤ndaren i Linux â€“ ofta kallad superuser. Den har fullstÃ¤ndiga rÃ¤ttigheter till alla filer, kataloger, processer och kommandon. Inloggning som root kan vara farligt, eftersom:

- Alla kommandon kÃ¶rs utan begrÃ¤nsning â€“ ett felsteg kan krascha systemet.
- Root-inloggning loggas ofta inte separat, vilket fÃ¶rsvÃ¥rar spÃ¥rbarhet.
- Om en angripare fÃ¥r root-access Ã¤r systemet i praktiken helt Ã¶vertaget.

DÃ¤rfÃ¶r rekommenderas att man anvÃ¤nder sudo istÃ¤llet â€“ ett verktyg som tillfÃ¤lligt ger root-rÃ¤ttigheter till vanliga anvÃ¤ndare.

#### sudo â€“ tillfÃ¤llig superkraft

Med sudo kan en vanlig anvÃ¤ndare kÃ¶ra specifika kommandon med administratÃ¶rsrÃ¤ttigheter. Exempel:

sudo apt update

Vid fÃ¶rsta anvÃ¤ndningen (eller efter en timeout) krÃ¤vs lÃ¶senord, vilket loggas i systemet. FÃ¶rdelarna med sudo:

- Du vet vem som kÃ¶rde vad â€“ loggar skapas i /var/log/auth.log
- RÃ¤ttigheterna Ã¤r tillfÃ¤lliga â€“ du Ã¤r inte permanent superuser
- Det gÃ¥r att begrÃ¤nsa anvÃ¤ndares rÃ¤ttigheter till specifika kommandon

Konfigurationen sker i /etc/sudoers, och bÃ¶r alltid redigeras med:

sudo visudo

ğŸ‘¤ Exempel pÃ¥ begrÃ¤nsad sudo-access:

student ALL=(ALL) NOPASSWD: /usr/sbin/service apache2 restart

HÃ¤r tillÃ¥ts anvÃ¤ndaren student att starta om Apache utan att ange lÃ¶senord â€“ men inget annat.

#### AnvÃ¤ndar- och grupphantering

Varje anvÃ¤ndare i Linux har ett UID (User ID), och varje grupp har ett GID (Group ID). Alla filer och kataloger har tre behÃ¶righetsnivÃ¥er:

| r | read | LÃ¤sa filer eller lista kataloger |
| --- | --- | --- |
| w | write | Skriva till filer eller Ã¤ndra innehÃ¥ll |
| x | execute | KÃ¶ra filer eller gÃ¥ in i kataloger |

ğŸ‘ Exempel:

-rwxr-xr-- 1 robin admin 4200 jul 18 10:00 script.sh

- rwx â€“ anvÃ¤ndaren robin kan lÃ¤sa, skriva, kÃ¶ra
- r-x â€“ gruppen admin kan lÃ¤sa och kÃ¶ra
- r-- â€“ andra anvÃ¤ndare fÃ¥r endast lÃ¤sa

#### Byta Ã¤gare och rÃ¤ttigheter

ğŸ“‚ Byta Ã¤gare och grupp:

sudo chown robin:admin fil.txt

ğŸ”’ Ã„ndra behÃ¶righeter (numeriskt eller symboliskt):

chmod 755 script.sh

chmod u+x fil.sh # LÃ¤gg till kÃ¶rbarhet fÃ¶r Ã¤gare

ğŸ‘¥ LÃ¤gg till en anvÃ¤ndare i en grupp:

sudo usermod -aG sudo student

-aG stÃ¥r fÃ¶r "append to Group" â€“ viktigt fÃ¶r att inte skriva Ã¶ver befintliga grupper.

#### Vanliga misstag och fallgropar

- Undvik att ge alla anvÃ¤ndare full sudo-access utan eftertanke.
- AnvÃ¤nd NOPASSWD endast i sÃ¤rskilda, sÃ¤kra sammanhang.
- HÃ¥ll koll pÃ¥ vem som kan gÃ¶ra vad â€“ anvÃ¤nd loggarna i /var/log/auth.log.
- Logga aldrig in som root om du inte mÃ¥ste â€“ sÃ¤rskilt inte via SSH.

ğŸ’¡ Tips: PÃ¥ mÃ¥nga moderna system (t.ex. Ubuntu) Ã¤r root-kontot inaktiverat som standard. AdministratÃ¶rer anvÃ¤nder istÃ¤llet ett vanligt konto med sudo-rÃ¤ttigheter.

### 9.11.1 KontrollfrÃ¥gor

- Vad Ã¤r root-anvÃ¤ndarens roll i Linux?
- VarfÃ¶r bÃ¶r man undvika att arbeta direkt som root?
- Vad gÃ¶r kommandot sudo, och varfÃ¶r anvÃ¤nds det istÃ¤llet fÃ¶r root-inloggning?
- Vad gÃ¶r visudo, och varfÃ¶r bÃ¶r man anvÃ¤nda det istÃ¤llet fÃ¶r att direkt redigera /etc/sudoers?
- Vad innebÃ¤r rÃ¤ttigheterna r, w och x fÃ¶r filer och kataloger?
- Vad gÃ¶r kommandot chown, och vad betyder syntaxen robin:admin?
- Vad Ã¤r skillnaden mellan chmod 755 och chmod 700?
- Hur lÃ¤gger man till en anvÃ¤ndare i en grupp, t.ex. sudo-gruppen?
- Vad Ã¤r syftet med att begrÃ¤nsa vilka kommandon en anvÃ¤ndare fÃ¥r kÃ¶ra med sudo?
- Var kan man hitta loggar Ã¶ver anvÃ¤ndning av sudo?

### 

### 9.11.2 FÃ¶rdjupningslÃ¤nkar

- Ubuntu â€“ Users and Groups: [https://ubuntu.com/server/docs/users-and-groups](https://ubuntu.com/server/docs/users-and-groups)
- DigitalOcean â€“ How To Use Sudo on Ubuntu: [https://www.digitalocean.com/community/tutorials/how-to-use-sudo-on-ubuntu](https://www.digitalocean.com/community/tutorials/how-to-use-sudo-on-ubuntu)
- Linuxize â€“ Linux File Permissions Explained: [https://linuxize.com/post/linux-file-permissions/](https://linuxize.com/post/linux-file-permissions/)
- Red Hat â€“ Introduction to the sudo Command: [https://www.redhat.com/sysadmin/sudo-command](https://www.redhat.com/sysadmin/sudo-command)
- Ubuntu Manpages â€“ visudo: [https://manpages.ubuntu.com/manpages/focal/en/man8/visudo.8.html](https://manpages.ubuntu.com/manpages/focal/en/man8/visudo.8.html)

### 

### 9.11.3 Egna anteckningar

(LÃ¤mna plats fÃ¶r egna reflektioner, exempel och kommandon)
