# 9 Introduktion till IT-sÃ¤kerhet

## 9.13 Linux hÃ¤rdning av tjÃ¤nster (t.ex. SSH, brandvÃ¤gg, TLS/SSL)

HÃ¤rdning innebÃ¤r att minska attackytan fÃ¶r ett system genom att stÃ¤nga av onÃ¶diga funktioner, sÃ¤kra konfigurationer och begrÃ¤nsa Ã¥tkomst. MÃ¥let Ã¤r att gÃ¶ra det sÃ¥ svÃ¥rt som mÃ¶jligt fÃ¶r en angripare att ta sig in â€“ och sÃ¥ lÃ¤tt som mÃ¶jligt att upptÃ¤cka fÃ¶rsÃ¶k.

HÃ¤r tittar vi nÃ¤rmare pÃ¥ nÃ¥gra vanliga tjÃ¤nster och hur du sÃ¤krar dem.


#### SSH â€“ Secure Shell

SSH anvÃ¤nds fÃ¶r att fjÃ¤rransluta till Linux-system. Det Ã¤r kraftfullt â€“ men ocksÃ¥ ett vanligt mÃ¥l fÃ¶r automatiserade attacker.

âœ… Rekommenderade instÃ¤llningar fÃ¶r sÃ¤krare SSH:

- Byt standardport frÃ¥n 22 till nÃ¥got annat, t.ex. 2222 (OBS: detta stoppar inte en attack, men minskar mÃ¤ngden skriptade fÃ¶rsÃ¶k)

Byt standardport frÃ¥n 22 till nÃ¥got annat, t.ex. 2222
(OBS: detta stoppar inte en attack, men minskar mÃ¤ngden skriptade fÃ¶rsÃ¶k)


sudo nano /etc/ssh/sshd_config

# Port 2222

- StÃ¤ng av inloggning som root Root bÃ¶r aldrig kunna logga in via SSH â€“ anvÃ¤nd istÃ¤llet sudo.

StÃ¤ng av inloggning som root
Root bÃ¶r aldrig kunna logga in via SSH â€“ anvÃ¤nd istÃ¤llet sudo.


PermitRootLogin no

- TillÃ¥t endast nyckelbaserad autentisering KrÃ¤ver att anvÃ¤ndaren har en privat SSH-nyckel i sin klient.

TillÃ¥t endast nyckelbaserad autentisering
KrÃ¤ver att anvÃ¤ndaren har en privat SSH-nyckel i sin klient.


PasswordAuthentication no

- BegrÃ¤nsa vilka anvÃ¤ndare som fÃ¥r logga in via SSH:

BegrÃ¤nsa vilka anvÃ¤ndare som fÃ¥r logga in via SSH:


AllowUsers robin adminuser

- Starta om SSH fÃ¶r att ladda in Ã¤ndringar:

Starta om SSH fÃ¶r att ladda in Ã¤ndringar:

sudo systemctl restart ssh

ğŸ’¡ Tips: AnvÃ¤nd fail2ban fÃ¶r att blockera IP-adresser som fÃ¶rsÃ¶ker logga in upprepade gÃ¥nger med fel lÃ¶senord. Det skyddar sÃ¤rskilt bra mot brute-force-attacker.

#### BrandvÃ¤gg â€“ UFW (Uncomplicated Firewall)

En brandvÃ¤gg kontrollerar vilken trafik som fÃ¥r passera in eller ut frÃ¥n datorn. ufw Ã¤r ett anvÃ¤ndarvÃ¤nligt grÃ¤nssnitt till den kraftfulla brandvÃ¤ggen iptables.

âœ… SÃ¥ kommer du igÃ¥ng med UFW:


sudo apt install ufw

sudo ufw default deny incoming

sudo ufw default allow outgoing

sudo ufw allow 22/tcp # TillÃ¥t SSH (eller 2222 om du bytt port)

sudo ufw enable

ğŸ“Œ OBS: LÃ¤gg alltid till regler fÃ¶r fjÃ¤rrÃ¥tkomst innan du aktiverar ufw, annars riskerar du att lÃ¥sa ute dig sjÃ¤lv!

ğŸ” Visa status:


sudo ufw status verbose

#### TLS/SSL â€“ Krypterad kommunikation

TLS (Transport Layer Security) Ã¤r efterfÃ¶ljaren till SSL (Secure Sockets Layer), och anvÃ¤nds fÃ¶r att skydda data under Ã¶verfÃ¶ring. Du har sett det i praktiken nÃ¤r du besÃ¶ker en webbplats med https://.

ğŸ“¦ Installera Let's Encrypt-certifikat med Certbot:


sudo apt install certbot python3-certbot-apache

sudo certbot --apache

- FÃ¶r Nginx: byt --apache mot --nginx.

FÃ¶r Nginx: byt --apache mot --nginx.

ğŸ¯ VarfÃ¶r TLS/SSL?

- Skyddar all kommunikation frÃ¥n avlyssning
- BekrÃ¤ftar webbplatsens identitet
- Ger Ã¥tkomst till HTTPS â€“ ett krav i moderna webblÃ¤sare

Skyddar all kommunikation frÃ¥n avlyssning

BekrÃ¤ftar webbplatsens identitet

Ger Ã¥tkomst till HTTPS â€“ ett krav i moderna webblÃ¤sare

âš™ï¸ Automatisk fÃ¶rnyelse av certifikat:

Certbot installerar som standard en systemd-timer:

sudo systemctl status certbot.timer

Om det fungerar visas en aktiv timer som kÃ¶r certbot renew regelbundet.



