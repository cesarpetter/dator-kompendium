# 9 Introduktion till IT-s√§kerhet

## 9.12 Linux loggning och √∂vervakning

Loggning √§r en av de viktigaste delarna i ett s√§kert Linux-system. Utan loggar vet du inte vad som har h√§nt ‚Äì eller vad som h√§nder just nu. Loggar kan visa allt fr√•n inloggningsf√∂rs√∂k till programkrascher, √§ndrade filer, tj√§nstestarter, n√§tverksproblem och attacker. √ñvervakning handlar om att i realtid h√•lla koll p√• systemets h√§lsa, resursf√∂rbrukning och potentiella hot.

#### Viktiga loggsystem

journald (systemd journal)
De flesta moderna Linux-system (inklusive Ubuntu) anv√§nder systemd som init-system, vilket inkluderar journald som loggtj√§nst.

- Visar loggar med: journalctl
- Exempel: journalctl -xe visar senaste h√§ndelser med extra information
- Loggar i bin√§rt format ‚Äì inte direkt l√§sbara med cat
- Vill du bara visa kernel-relaterade loggar: journalctl -k

Visar loggar med: journalctl

Exempel: journalctl -xe visar senaste h√§ndelser med extra information

Loggar i bin√§rt format ‚Äì inte direkt l√§sbara med cat

Vill du bara visa kernel-relaterade loggar: journalctl -k

rsyslog (traditionellt loggsystem)
Klassiskt loggsystem som skriver till textfiler i /var/log/, t.ex.:

- /var/log/auth.log ‚Äì inloggningar, sudo-f√∂rs√∂k
- /var/log/syslog ‚Äì allm√§nna systemmeddelanden
- /var/log/kern.log ‚Äì kernel-meddelanden
- /var/log/dmesg ‚Äì h√•rdvarumeddelanden fr√•n uppstart

/var/log/auth.log ‚Äì inloggningar, sudo-f√∂rs√∂k

/var/log/syslog ‚Äì allm√§nna systemmeddelanden

/var/log/kern.log ‚Äì kernel-meddelanden

/var/log/dmesg ‚Äì h√•rdvarumeddelanden fr√•n uppstart

üìå Tips: Misslyckade sudo-f√∂rs√∂k loggas i /var/log/auth.log ‚Äì s√∂k efter rader som inneh√•ller authentication failure.

De flesta Ubuntu-system anv√§nder b√•de rsyslog och journald parallellt. Det ger redundans och b√§ttre filtreringsm√∂jligheter.

#### √ñvervakningsverktyg

top / htop
Visar realtidsinformation om CPU-, RAM- och processanv√§ndning.

- top ‚Äì inbyggt, konsolbaserat
- htop ‚Äì mer visuellt och anv√§ndarv√§nligt (kan installeras med sudo apt install htop)

top ‚Äì inbyggt, konsolbaserat

htop ‚Äì mer visuellt och anv√§ndarv√§nligt (kan installeras med sudo apt install htop)

uptime och load average
Visar systemets drifttid och belastning:


uptime

vmstat, iostat, netstat
Ger information om minnesanv√§ndning, I/O och n√§tverkstrafik.

üí° vmstat = minne & processer, iostat = diskaktivitet, netstat = n√§tverksanslutningar (ers√§tts av ss)

#### fail2ban ‚Äì skydd mot brute-force

Fail2ban √∂vervakar loggar (t.ex. /var/log/auth.log) och blockerar IP-adresser som f√∂rs√∂ker logga in upprepade g√•nger utan att lyckas. Det √§r s√§rskilt effektivt f√∂r att skydda SSH.

Installera:

sudo apt install fail2ban

Du kan anpassa reglerna i /etc/fail2ban/jail.conf eller skapa en egen jail.local f√∂r egna inst√§llningar.

#### AIDE ‚Äì Advanced Intrusion Detection Environment

AIDE fungerar som ett "f√∂re-efter"-verktyg f√∂r att bevaka systemets tillst√•nd. Det h√•ller koll p√• fil√§ndringar, r√§ttigheter och misst√§nkta modifieringar.

Installera:

sudo apt install aide

Initiera databas:

sudo aideinit

Verifiera √§ndringar:

sudo aide --check

üîê Viktigt: F√∂rvara AIDE:s ursprungsdatabas p√• en separat, skyddad plats s√• att en angripare inte kan manipulera b√•de filsystem och kontrollfil.



### 

### 9.12.1 Kontrollfr√•gor

- Vad √§r syftet med loggning i ett Linux-system?
- Vilken kommandorad anv√§nds f√∂r att visa systemd-journalen?
- Vad √§r skillnaden mellan rsyslog och journald?
- N√§mn tre vanliga loggfiler i /var/log/.
- Vad g√∂r top respektive htop?
- Hur kan du kontrollera hur l√§nge ett system har varit ig√•ng?
- Vad √§r fail2ban, och hur fungerar det?
- Vad √§r AIDE och hur anv√§nds det?
- Hur kontrollerar man om AIDE har uppt√§ckt n√•gra √§ndringar?
- Varf√∂r √§r √∂vervakning viktig √§ven i system som fungerar "som de ska"?

Vad √§r syftet med loggning i ett Linux-system?

Vilken kommandorad anv√§nds f√∂r att visa systemd-journalen?

Vad √§r skillnaden mellan rsyslog och journald?

N√§mn tre vanliga loggfiler i /var/log/.

Vad g√∂r top respektive htop?

Hur kan du kontrollera hur l√§nge ett system har varit ig√•ng?

Vad √§r fail2ban, och hur fungerar det?

Vad √§r AIDE och hur anv√§nds det?

Hur kontrollerar man om AIDE har uppt√§ckt n√•gra √§ndringar?

Varf√∂r √§r √∂vervakning viktig √§ven i system som fungerar "som de ska"?


### 

### 9.12.2 F√∂rdjupningsl√§nkar

- Ubuntu ‚Äì Log Files Explained https://help.ubuntu.com/community/LinuxLogFiles
- journalctl manpage https://man7.org/linux/man-pages/man1/journalctl.1.html
- DigitalOcean ‚Äì Fail2Ban Tutorial https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-ubuntu-20-04
- AIDE ‚Äì Officiell webbplats https://aide.github.io/
- Ubuntu ‚Äì Monitor System Performance https://ubuntu.com/server/docs/monitoring

Ubuntu ‚Äì Log Files Explained
 https://help.ubuntu.com/community/LinuxLogFiles

journalctl manpage
 https://man7.org/linux/man-pages/man1/journalctl.1.html

DigitalOcean ‚Äì Fail2Ban Tutorial
 https://www.digitalocean.com/community/tutorials/how-to-protect-ssh-with-fail2ban-on-ubuntu-20-04

AIDE ‚Äì Officiell webbplats
 https://aide.github.io/

Ubuntu ‚Äì Monitor System Performance
 https://ubuntu.com/server/docs/monitoring


### 

### 9.12.3 Egna anteckningar

(H√§r kan du skriva ner egna exempel, kommandon du testat eller viktiga l√§rdomar om loggning och √∂vervakning.)

