---
title: 9.13 – Automatisering av säkerhetsuppgifter (cron, script, loggning)
parent: 9 – Introduktion till IT-säkerhet
has_children: true
---
# 9.13 – Automatisering av säkerhetsuppgifter (cron, script, loggning)

Att automatisera återkommande uppgifter i Linux är en av de största fördelarna med systemet – och det gäller särskilt när det handlar om säkerhet. Genom att schemalägga uppgifter som uppdateringar, loggrensning, säkerhetskopiering eller övervakning kan du minimera risken för den mänskliga faktorn och säkerställa att skyddet är aktivt dygnet runt.

cron används för att köra kommandon vid återkommande tidpunkter.

Struktur i crontab:

* * * * * kommando
│ │ │ │ │
│ │ │ │ └─ dag i veckan (0-6, söndag=0)
│ │ │ └─── månad (1-12)
│ │ └───── dag i månaden (1-31)
│ └─────── timme (0-23)
└───────── minut (0-59)

Exempel:
 Kör ett script varje natt kl 02:00:

0 2 * * * /home/admin/scripts/update-check.sh

Tips: Använd crontab -e för att redigera användarens schema.

Script låter dig skapa anpassade säkerhetsrutiner.

Exempel: Automatiserat uppdateringsscript

#!/bin/bash
echo "Uppdatering startade: $(date)" >> /var/log/uppdatering.log
apt update && apt upgrade -y >> /var/log/uppdatering.log 2>&1
echo "Färdigt: $(date)" >> /var/log/uppdatering.log

Spara som /home/admin/scripts/update-check.sh och gör körbar:

chmod +x update-check.sh

Lägg till i cron:
 0 3 * * * /home/admin/scripts/update-check.sh

I Linux loggas det mesta, särskilt sådant som rör systemet och säkerhet.

Viktiga loggfiler:

/var/log/auth.log – inloggningar och sudo-kommandon

/var/log/syslog – generell systemlogg

/var/log/ufw.log – brandväggsloggar (om UFW används)

/var/log/apt/history.log – installationshistorik

Visa senaste 20 rader i auth.log:

tail -n 20 /var/log/auth.log

Övervaka logg i realtid:

tail -f /var/log/syslog

fail2ban är ett verktyg som automatiskt blockerar IP-adresser som upprepat försöker logga in felaktigt – t.ex. via SSH.

Installation:

sudo apt install fail2ban

Starta och aktivera:

sudo systemctl enable --now fail2ban

Logg:

sudo cat /var/log/fail2ban.log

fail2ban använder loggfiler som auth.log för att identifiera attacker.

