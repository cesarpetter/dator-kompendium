# 9 Introduktion till IT-säkerhet

## 9.14 Linux backup och återställning

Att göra regelbundna säkerhetskopior (backuper) är en av de viktigaste säkerhetsåtgärderna du kan ta – men också en av de mest bortglömda. I Linux är det extra viktigt eftersom många servrar är kritiska för verksamheten och inte har något grafiskt gränssnitt som påminner om att "säkerhetskopiera nu".

Backup handlar inte bara om att skydda sig mot hårddiskkrascher – utan även mot ransomware, oavsiktlig radering, konfigurationsfel och attacker.

#### Typer av backup

| Typ | Förklaring | Exempel |
| --- | --- | --- |
| Full backup | All data kopieras | Hela /home eller hela /etc |
| Inkrementell | Endast ändringar sedan senaste backup | Tids- och utrymmeseffektiv |
| Differentierad | Ändringar sedan senaste full backup | En kompromiss mellan ovan |

Typ

Förklaring

Exempel

Full backup

All data kopieras

Hela /home eller hela /etc

Inkrementell

Endast ändringar sedan senaste backup

Tids- och utrymmeseffektiv

Differentierad

Ändringar sedan senaste full backup

En kompromiss mellan ovan

#### Verktyg i Linux

Här är några vanliga verktyg för backup i Linux:

- rsync – Kopierar filer och kataloger effektivt (lokalt eller över nätverk)
- tar – Används för att skapa arkivfiler (.tar/.gz)
- cron – Schemalägger backupjobb
- Deja Dup – Enkel GUI-lösning för Ubuntu Desktop
- Bacula, Duplicity, BorgBackup – Mer avancerade backup-lösningar med stöd för schemaläggning, inkrementella backuper, lagring till moln och loggning

rsync – Kopierar filer och kataloger effektivt (lokalt eller över nätverk)

tar – Används för att skapa arkivfiler (.tar/.gz)

cron – Schemalägger backupjobb

Deja Dup – Enkel GUI-lösning för Ubuntu Desktop

Bacula, Duplicity, BorgBackup – Mer avancerade backup-lösningar med stöd för schemaläggning, inkrementella backuper, lagring till moln och loggning

#### Exempel på enkel backup med rsync

Säkerhetskopiera en hemkatalog till en extern disk:

rsync -avh --delete /home/robin /media/backupdisk/

Beskrivning:

- -a: Arkivläge (bevarar rättigheter, ägarskap)
- -v: Verbos (visa vad som görs)
- -h: Mänskligt läsbart format
- --delete: Tar bort filer på backupmål som inte längre finns på källan (för att spegla exakt)

-a: Arkivläge (bevarar rättigheter, ägarskap)

-v: Verbos (visa vad som görs)

-h: Mänskligt läsbart format

--delete: Tar bort filer på backupmål som inte längre finns på källan (för att spegla exakt)

#### Schemalägga backup med cron

Redigera crontab:


crontab -e

Lägg till en rad för att köra backup varje natt kl. 03:00:


0 3 * * * rsync -avh /home/robin /media/backupdisk/

#### Återställning – vad gör du när det smäller?

En backup är bara användbar om du vet hur du återställer den. Testa därför återställning regelbundet!

Återställningsexempel:


rsync -avh /media/backupdisk/robin /home/

Tips: Dokumentera alltid var backuper sparas, hur de återställs och vem som ansvarar för dem.

#### Offsite & molnbackup

Om backuper endast sparas lokalt riskerar de att förstöras i brand, stöld eller översvämning.

Lösning:

- Synka till en annan fysisk plats (t.ex. annan server)
- Använd molnlagring med verktyg som rclone (Google Drive, S3, etc.)
- Kryptera känslig data innan molnuppladdning (ex. med gpg)

Synka till en annan fysisk plats (t.ex. annan server)

Använd molnlagring med verktyg som rclone (Google Drive, S3, etc.)

Kryptera känslig data innan molnuppladdning (ex. med gpg)

#### Vanliga misstag

- Backupen sparas på samma disk som originalet
- Backupen körs – men återställning testas aldrig
- Backupen innehåller bara data – men inte konfiguration
- Backupskriptet loggar inte något

Backupen sparas på samma disk som originalet

Backupen körs – men återställning testas aldrig

Backupen innehåller bara data – men inte konfiguration

Backupskriptet loggar inte något

Bästa praxis:
Full backup + inkrementell backup + offsite-lösning + återställningstest


